System.register(["./chunk-index7.js","./chunk-vendor.js","./chunk-locale.js","./chunk-band.js","./chunk-linear.js","./chunk-tip.js","./chunk-frameworks.js","./chunk-format-symbol.js","./chunk-axis.js","./chunk-line.js","./chunk-array.js","./chunk-range.js"],function(){"use strict";var C,E,P,q,W,M,B,F,g,b,w,R,G,N,U,D,Y,H,I,V,J;return{setters:[function(){},function(t){C=t.t,E=t.c},function(t){P=t.w,q=t.m},function(t){W=t.b},function(t){M=t.S,B=t.D,F=t.E,g=t.m,b=t.l,w=t.s},function(t){R=t.d},function(t){G=t.m,N=t.aT},function(t){U=t.f},function(t){D=t.b,Y=t.a},function(t){H=t.l},function(t){I=t.u,V=t.j},function(t){J=t.r}],execute:function(){function t(n){return typeof n=="string"?new M([document.querySelectorAll(n)],[document.documentElement]):new M([n==null?[]:B(n)],F)}function dt(n){return(Math.pow(2,-10*n)-.0009765625)*1.0009775171065494}var ft=1.70158,pt=function n(a){a=+a;function e(l){return--l*l*((l+1)*a+l)+1}return e.overshoot=n,e}(ft),K=2*Math.PI,mt=1,ht=.3,gt=function n(a,e){var l=Math.asin(1/(a=Math.max(1,a)))*(e/=K);function r(o){return 1-a*dt(o=+o)*Math.sin((o+l)/e)}return r.amplitude=function(o){return n(o,e*K)},r.period=function(o){return n(a,o)},r}(mt,ht),Q=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,x=(n,a)=>Q(n,"name",{value:a,configurable:!0}),X=(n,a,e,l)=>{for(var r=l>1?void 0:l?xt(a,e):a,o=n.length-1,u;o>=0;o--)(u=n[o])&&(r=(l?u(a,e,r):u(r))||r);return l&&r&&Q(a,e,r),r};const vt=G(Z);async function Z(n){return await(await N(n,{headers:{accept:"application/json"}})).json()}x(Z,"fetchData");let k=class extends HTMLElement{async connectedCallback(){const n=this.graph,a=n.getAttribute("data-url");if(!!a){for(const e of n.querySelectorAll("svg.viz"))e.remove();n.classList.add("is-graph-loading"),n.classList.remove("is-graph-load-error","is-graph-empty");try{const e=await vt(a);n.classList.remove("is-graph-loading"),e!=null&&e.unusable?n.classList.add("is-graph-without-usable-data"):e!=null&&e.length===0||e!=null&&e.summary!=null&&e.summary.total===0||e[0]!=null&&e[0].weeks!=null&&e[0].weeks.length===0?n.classList.add("is-graph-empty"):tt(n,e)}catch(e){throw n.classList.remove("is-graph-loading"),n.classList.add("is-graph-load-error"),e}}}};x(k,"CommitActivityGraphElement"),X([C],k.prototype,"graph",2),k=X([E],k);function tt(n,a){const e=n.querySelector("#commit-activity-master"),l=n.querySelector("#commit-activity-detail");let r=260;const o=l.clientWidth;let u=0,L=null;(function(){let s,i,h,rt=0;for(s=i=0,h=a.length;i<h;s=++i)a[s].total!==0&&(rt=s),a[s].index=s;u=rt;const[st,z,ot,At]=[20,30,30,40];let d=a[u].days,it=g(a,function(c){return g(c.days)});const v=b().domain([0,d.length-1]).range([0,o-z-ot]),j=b().domain([0,it]).range([r,0]),jt=D(j).ticks(5).tickSize(-o+ot+z),m=w(l).data([d]).append("svg").attr("viewBox",`0 0 ${o} ${r+st+At}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${z},${st})`);m.append("g").attr("class","y axis").call(jt),m.append("g").attr("class","axis").selectAll(".day").data(P).enter().append("g").attr("class","day").attr("transform",function(c,f){return`translate(${v(f)}, ${r})`}).append("text").attr("text-anchor","middle").attr("dy","2em").text(function(c){return c});const ct=H().x(function(c,f){return v(f)}).y(j);m.append("path").attr("class","path").attr("d",ct);const lt=m.selectAll("g.dot").data(d).enter().append("g").attr("class","dot").attr("transform",function(c,f){return`translate(${v(f)}, ${j(c)})`});lt.append("circle").attr("r",4),lt.append("text").attr("text-anchor","middle").attr("class","tip").attr("dy",-10).text(function(c){return c}),L=x(function(c){if(c.index.index>=52||c.index.index<0)return;function f(y){const S=document.createElementNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform",y);const ut=S.transform.baseVal.consolidate().matrix;return[ut.e,ut.f]}x(f,"getTranslation"),u=c.index.index,d=a[c.index.index].days,it=g(d),v.domain([0,d.length-1]);const St=t(".bar.mini").attr("class","bar mini").nodes(),Mt=w(St[u]).attr("class","bar mini active"),Dt=f(Mt.attr("transform"));return et.transition().ease(pt).duration(300).attr("transform",`translate(${Dt[0]+8}, 105)`),m.selectAll(".path").data([d]).transition().duration(500).attr("d",ct),m.selectAll("g.dot").data(d).transition().duration(300).attr("transform",function(y,S){return`translate(${v(S)}, ${j(y)})`}),m.selectAll("text.tip").data(d).text(function(y){return y})},"transitionToWeek")})();const[nt,$,T,yt]=[10,30,20,30];r=100;const at=a.map(function(s){return s.total}),bt=g(at),wt=I("%m/%d"),p=W().domain(J(at.length)).rangeRound([0,o-$-T]).padding(.1),O=b().domain([0,bt]).range([r,0]),kt=D(O).ticks(3).tickSize(-o+$+T).tickFormat(U),$t=Y(p).ticks(V).tickFormat(function(s,i){const h=new Date(a[i].week*1e3);return wt(h)}),_=R().attr("class","svg-tip").offset([-10,0]).html(function(s){const i=new Date(s.week*1e3),h=`${q[i.getUTCMonth()].slice(0,3)} ${i.getUTCDate()}`;return`<strong>${s.total}</strong> ${s.total===1?"commit":"commits"} the week of ${h}`}),A=w(e).append("svg").attr("viewBox",`0 0 ${o+($+T)} ${r+nt+yt}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${$},${nt})`).call(_);A.append("g").attr("class","y axis").call(kt),A.selectAll("g.mini").data(a).enter().append("g").attr("class",function(s,i){return i===u?"bar mini active":"bar mini"}).attr("transform",function(s,i){return`translate(${p(i)}, 0)`}).on("click",function(s,i){return L&&L({node:this,index:i,data:s})}).append("rect").attr("width",p.bandwidth()).attr("height",function(s){return r-O(s.total)}).attr("y",function(s){return O(s.total)}).on("mouseover",_.show).on("mouseout",_.hide),A.append("g").attr("class","x axis").attr("transform",`translate(0,${r})`).call($t).selectAll(".tick").style("display",function(s,i){return i%3!==0?"none":"block"});const et=A.append("circle").attr("class","focus").attr("r",8).attr("transform",`translate(${p(u)+p.bandwidth()/2}, ${-r})`);et.transition().ease(gt).duration(1e3).attr("r",2).attr("transform",`translate(${p(u)+p.bandwidth()/2}, ${r+5})`)}x(tt,"render")}}});
//# sourceMappingURL=chunk-commit-activity-graph-element-e1f8ea1c.js.map
