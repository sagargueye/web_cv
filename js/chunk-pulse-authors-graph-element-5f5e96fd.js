System.register(["./chunk-vendor.js","./chunk-band.js","./chunk-linear.js","./chunk-tip.js","./chunk-frameworks.js","./chunk-range.js","./chunk-axis.js"],function(){"use strict";var p,m,f,v,b,w,y,j,k,x,_,L;return{setters:[function(e){p=e.t,m=e.c},function(e){f=e.b},function(e){v=e.l,b=e.m,w=e.f,y=e.s},function(e){j=e.d},function(e){k=e.m,x=e.aT},function(e){_=e.r},function(e){L=e.b}],execute:function(){var e=Object.defineProperty,C=Object.getOwnPropertyDescriptor,h=(a,s)=>e(a,"name",{value:s,configurable:!0}),A=(a,s,r,n)=>{for(var o=n>1?void 0:n?C(s,r):s,i=a.length-1,c;i>=0;i--)(c=a[i])&&(o=(n?c(s,r,o):c(o))||o);return n&&o&&e(s,r,o),o};const M=k($);async function $(a){return await(await x(a,{headers:{accept:"application/json"}})).json()}h($,"fetchData");let l=class extends HTMLElement{async connectedCallback(){const a=this.graph,s=a.getAttribute("data-url");if(!!s){for(const r of a.querySelectorAll("svg.viz"))r.remove();a.classList.add("is-graph-loading"),a.classList.remove("is-graph-load-error","is-graph-empty");try{const r=await M(s);a.classList.remove("is-graph-loading"),r!=null&&r.unusable?a.classList.add("is-graph-without-usable-data"):r!=null&&r.length===0||r!=null&&r.summary!=null&&r.summary.total===0||r[0]!=null&&r[0].weeks!=null&&r[0].weeks.length===0?a.classList.add("is-graph-empty"):D(a,r)}catch(r){throw a.classList.remove("is-graph-loading"),a.classList.add("is-graph-load-error"),r}}}};h(l,"PulseAuthorsGraphElement"),A([p],l.prototype,"graph",2),l=A([m],l);const P=15;function D(a,s){const r=s.slice(0,+(P-1)+1),n={top:20,right:0,bottom:30,left:25},o=Math.round(a.getBoundingClientRect().width)-n.left-n.right,i=Math.round(a.getBoundingClientRect().height)-n.top-n.bottom,c=f().domain(_(P)).rangeRound([0,o]).padding(.2),u=v().domain([0,b(r,t=>t.commits)]).range([i,0]),R=L(u).ticks(3).tickSize(-o).tickFormat(t=>t<1e3?t:w(",~s")(t)),g=j().attr("class","svg-tip").offset([-10,0]).html(function(t){const d=t.login||t.name;return`<strong>${t.commits}</strong> ${t.commits===1?"commit":"commits"} authored by <strong>${d}</strong>`}),O=y(a).append("svg").attr("class","viz").attr("width",o+n.left+n.right).attr("height",i+n.top+n.bottom).append("g").attr("transform",`translate(${n.left}, ${n.top})`).call(g);O.append("g").attr("class","y axis").call(R);const z=O.selectAll(".bar").data(r).enter().append("g").attr("class",`bar ${a.getAttribute("data-bar-class")}`).attr("transform",(t,d)=>`translate(${c(d)}, 0)`);z.append("rect").attr("width",c.bandwidth()).attr("height",t=>i-u(t.commits)).attr("y",t=>u(t.commits)).on("mouseover",g.show).on("mouseout",g.hide),z.append("a").attr("xlink:href",function(t){if(t.login!=null)return`/${t.login}`}).attr("data-hovercard-type","user").attr("data-hovercard-url",t=>t.hovercard_url).append("image").attr("y",i+5).attr("alt",t=>t.login||"").attr("xlink:href",t=>t.gravatar).attr("width",c.bandwidth()).attr("height",c.bandwidth())}h(D,"render")}}});
//# sourceMappingURL=chunk-pulse-authors-graph-element-efe874f2.js.map
