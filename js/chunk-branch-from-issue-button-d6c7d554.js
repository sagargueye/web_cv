System.register(["./chunk-ref-selector.js","./chunk-vendor.js","./chunk-frameworks.js"],function(){"use strict";var h,o,p,d,f,m,b;return{setters:[function(){},function(c){h=c.a,o=c.t,p=c.b,d=c.i,f=c.c,m=c.f},function(c){b=c.e}],execute:function(){var c=Object.defineProperty,B=Object.getOwnPropertyDescriptor,y=(t,e)=>c(t,"name",{value:e,configurable:!0}),s=(t,e,n,a)=>{for(var i=a>1?void 0:a?B(e,n):e,u=t.length-1,l;u>=0;u--)(l=t[u])&&(i=(a?l(e,n,i):l(i))||i);return a&&i&&c(e,n,i),i};h("click","label.js-create-branch-from-issue-source-branch",t=>{const e=t.currentTarget;if(!e)return;const n=document.querySelector(".js-selected-branch"),a=e.querySelector("input");n.textContent=a.value;const i=e.closest("details");i.open=!1});let r=class extends HTMLElement{constructor(){super(...arguments);this.defaultRepo=""}set error(t){this.errorContainer.innerHTML=t||""}set result(t){this.resultContainer.innerHTML=t||""}set submitting(t){this.spinner.style.display=t?"inline":"none"}set baseRepoNwo(t){this.baseRepoName&&(this.baseRepoName.textContent=t,this.renderSelectItems(t))}renderSelectItems(t){this.repos.map(e=>{const n=e.closest(".js-repo-select-label");n==null||n.classList.toggle("selected",e.getAttribute("data-name")===t)})}openDialog(t){t.preventDefault();const e=this.details;e.open=!0,e.hidden=!1,e.removeAttribute("aria-hidden"),this.baseRepoNwo=this.defaultRepo}selectSourceBranch(){this.changeSourceBranchButton.hidden=!0,this.sourceBranch.hidden=!1}async setRepo(t){if(!this.sourceBranchDetails)return;const e=t.target,n=e==null?void 0:e.getAttribute("data-url"),a=e==null?void 0:e.getAttribute("data-name");if(!n||!a)return;this.baseRepoNwo=a;const i=this.sourceBranch.hidden,u=this.sourceBranchSpinner.content.cloneNode(!0);this.sourceBranchDetails.replaceWith(u),this.submitButton.disabled=!0;const l=await b(document,n);this.sourceBranch.replaceWith(l),this.sourceBranch.hidden=i,this.submitButton.disabled=!1}closeDialog(){const t=this.form;t.reset(),t.hidden=!1;const e=this.details;e.hidden=!0,e.setAttribute("aria-hidden","true"),this.changeSourceBranchButton.hidden=!1,this.sourceBranch.hidden=!0,this.error=null,this.result=null}async submit(t){var e;t.preventDefault(),this.submitting=!0;const n=this.form,a=await fetch(n.action,{method:n.method,body:new FormData(n)}),i=await a.text();a.ok?(this.error=null,n.hidden=!0,this.result=i):this.error=i,this.submitting=!1;const u=this.developmentForm;u&&m(u,"submit");const l=(e=this.desktopLink)==null?void 0:e.href;l&&window.location.replace(l)}};y(r,"CreateIssueBranchElement"),s([o],r.prototype,"form",2),s([o],r.prototype,"developmentForm",2),s([o],r.prototype,"spinner",2),s([o],r.prototype,"errorContainer",2),s([o],r.prototype,"details",2),s([o],r.prototype,"resultContainer",2),s([o],r.prototype,"baseRepoName",2),s([p],r.prototype,"repos",2),s([o],r.prototype,"desktopLink",2),s([o],r.prototype,"changeSourceBranchButton",2),s([o],r.prototype,"sourceBranch",2),s([o],r.prototype,"sourceBranchSpinner",2),s([o],r.prototype,"sourceBranchDetails",2),s([o],r.prototype,"submitButton",2),s([d],r.prototype,"defaultRepo",2),r=s([f],r)}}});
//# sourceMappingURL=chunk-branch-from-issue-button-705ab752.js.map
