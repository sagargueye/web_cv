System.register(["./chunk-frameworks.js","./chunk-vendor.js"],function(){"use strict";var O,F,U,q,D,K,J,M,N,H,z,V,G,X,B,W,Q,d;return{setters:[function(s){O=s.b9,F=s.ba,U=s.bb,q=s.bc,D=s.k,K=s.bd,J=s.R,M=s.S,N=s.V,H=s.be,z=s.o,V=s.r,G=s.f,X=s.b,B=s.b2},function(s){W=s.o,Q=s.j,d=s.a}],execute:function(){var s=Object.defineProperty,j=(e,t)=>s(e,"name",{value:t,configurable:!0});function Y(){const e=new FormData;for(const t of Object.keys(q()))e.append("variables[pageViews][]",t);return e}j(Y,"getSuggestionsRequestData");function Z(e){if("errors"in e.data)return[];let t=1;const o=[];for(const n of e.data.suggestions.nodes)n!=null&&(n.rank=t++,n.pageKey=te(n),n.type==="Team"&&(n.name=`@${n.name}`),o.push(n));return o}j(Z,"parseSuggestionsResponse");function S(e,t){const o=new URL(e,window.location.origin),n=new URLSearchParams(o.search.slice(1));n.set("q",t);const r=new URLSearchParams(window.location.search).get("type");return r&&n.set("type",r),o.search=n.toString(),o.toString()}j(S,"buildSearchURL");function ee(e,t){const o=new URL(t,window.location.origin),n=new URLSearchParams(o.search.slice(1));return n.get("q")&&n.set("q",e),o.search=n.toString(),o.toString()}j(ee,"updateSearchURL");function te(e){let t;const[o,n]=e.name.split("/")||[];switch(e.type){case"Project":t=U(e.owner.name,`${e.number}`);break;case"Repository":t=F(o,n);break;case"Team":t=O(o,n);break;default:throw new Error(`Invalid Suggestion type: ${e.type}`)}return t}j(te,"pageKeyFromSuggestion");var fe=Object.defineProperty,m=(e,t)=>fe(e,"name",{value:t,configurable:!0});let y={};function x(e){const t=e.getAttribute("data-target-type");if(t==="Search"){const o=document.querySelector(".js-site-search-form"),n=o.getAttribute("data-scope-type"),r=e.getAttribute("data-item-type");n&&g({scope_id:parseInt(o.getAttribute("data-scope-id")||"").toString(),scope_type:n,target_scope:r||""}),p("search")}else(t==="Project"||t==="Repository"||t==="Team")&&(g({target_id:parseInt(e.getAttribute("data-target-id")||"").toString(),target_type:t,target_scope:"",client_rank:parseInt(e.getAttribute("data-client-rank")||"").toString(),server_rank:parseInt(e.getAttribute("data-server-rank")||"").toString()}),p("click"))}m(x,"trackSelection");function p(e){var t,o;if(!parseInt(((o=(t=document.head)==null?void 0:t.querySelector('meta[name="octolytics-actor-id"]'))==null?void 0:o.content)||""))return!1;let r=y.session_id;return e==="menu-activation"&&r||e!=="menu-activation"&&!r||(e==="menu-activation"&&(r=ne(),g({session_id:r})),!r)?!1:(D(`jump-to-${e}`,y),(e==="menu-deactivation"||e==="click"||e==="search")&&oe(),!0)}m(p,"trackJumpToEvent");function g(e){Object.assign(y,e)}m(g,"updateCurrentEventPayload");function oe(){y={}}m(oe,"resetCurrentEventPayload");function je(){return{...y}}m(je,"cloneCurrentEventPayload");function ne(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}m(ne,"uuidv4");var ye=Object.defineProperty,l=(e,t)=>ye(e,"name",{value:t,configurable:!0});function re(e){e.classList.add("js-navigation-enable"),e.classList.add("jump-to-field-active")}l(re,"activateSearchField");function ae(e){e.classList.remove("js-navigation-enable"),e.classList.remove("jump-to-field-active")}l(ae,"deactivateSearchField");function _(e){document.querySelector(".js-jump-to-suggestions-container").classList.remove("d-none"),e.classList.add("jump-to-dropdown-visible"),document.querySelector(".js-jump-to-field").setAttribute("aria-expanded","true")}l(_,"showDropdown");function k(){document.querySelector(".js-jump-to-suggestions-container").classList.add("d-none");const e=document.querySelector(".js-jump-to-field");e.classList.remove("jump-to-dropdown-visible"),e.setAttribute("aria-expanded","false"),p("menu-deactivation")}l(k,"hideDropdown");function L(e){const t=e.form,o=document.querySelector(".js-jump-to-suggestions-results-container"),n=e.value.trim(),r=!!(e.form&&e.form.getAttribute("data-scope-type")),a=(e.form&&e.form.getAttribute("data-scope-type"))==="Repository",c=o.querySelector(".js-jump-to-scoped-search"),u=o.querySelector(".js-jump-to-owner-scoped-search"),i=o.querySelector(".js-jump-to-global-search");if(c.classList.toggle("d-none",!n||!r),u&&u.classList.toggle("d-none",!n||!a),i.classList.toggle("d-none",!n),n&&r){const f=t.getAttribute("action"),h=v(c,n,S(f,n),!0,!1);o.replaceChild(h,c)}if(u&&n&&r){const f=t.getAttribute("data-owner-scoped-search-url"),h=v(u,n,S(f,n),!0,!0);o.replaceChild(h,u)}if(n){const f=t.getAttribute("data-unscoped-search-url"),h=v(i,n,S(f,n),!1,!1);o.replaceChild(h,i)}}l(L,"updateSearchEntries");function se(e,t,o){if(!e.form)return;const r=P(".js-jump-to-suggestions-template-container"),a=document.createDocumentFragment();if(o.length<1&&!t)ie();else{for(const[c,u]of o.entries())a.appendChild(ue(r,u,t,c));E(a)}}l(se,"updateDropdown");function ce(){var e,t;return Boolean((t=(e=document.head)==null?void 0:e.querySelector('meta[name="user-login"]'))==null?void 0:t.content)}l(ce,"isUserLoggedIn");function ie(){if(!ce())return;const t=P(".js-jump-to-no-results-template-container").cloneNode(!0);t instanceof HTMLElement&&t.classList.remove("d-none"),E(t)}l(ie,"displayNoResults");function E(e){const t=document.querySelector(".js-jump-to-suggestions-results-container");for(const o of t.querySelectorAll(".js-jump-to-suggestion"))o.parentNode.removeChild(o);t.appendChild(e)}l(E,"replaceSuggestions");function b(e,t){const o=e.querySelector(".js-jump-to-octicon"),n=o.querySelector(t);o.classList.remove("d-none"),n.classList.remove("d-none")}l(b,"showSuggestionOcticon");function v(e,t,o,n,r){const a=e.cloneNode(!0);n?a.id=`jump-to-suggestion-search-${r?"scoped-owner":"scoped"}`:a.id="jump-to-suggestion-search-global";const c=a.querySelector(".js-jump-to-suggestion-path");c.href=o,c.setAttribute("data-target-type","Search");const u=a.querySelector(".js-jump-to-suggestion-name");u.textContent=t,u.setAttribute("aria-label",t),b(a,".js-jump-to-octicon-search");const i=a.querySelector(".js-jump-to-badge-search");return i.classList.remove("d-none"),n?i.querySelector(".js-jump-to-badge-search-text-default").classList.remove("d-none"):i.querySelector(".js-jump-to-badge-search-text-global").classList.remove("d-none"),a}l(v,"updateSearchEntry");function ue(e,t,o,n){const r=e.cloneNode(!0);r.id=`jump-to-suggestion-${t.type.toLowerCase()}-${t.databaseId}`;const a=r.querySelector(".js-jump-to-suggestion-path");a.href=t.path,a.setAttribute("data-target-type",t.type),a.setAttribute("data-target-id",`${t.databaseId}`),a.setAttribute("data-client-rank",`${n}`),a.setAttribute("data-server-rank",`${t.rank}`);const c=r.querySelector(".js-jump-to-suggestion-name");switch(c.textContent=t.name,c.setAttribute("aria-label",t.name),K(c,o.replace(/\s/g,"")),t.type){case"Team":{const i=r.querySelector(".js-jump-to-suggestion-avatar");i.alt=t.name,i.src=t.avatarUrl?t.avatarUrl:"",i.classList.remove("d-none");break}case"Project":b(r,".js-jump-to-octicon-project");break;case"Repository":b(r,".js-jump-to-octicon-repo");break}return r.querySelector(".js-jump-to-badge-jump").classList.remove("d-none"),r}l(ue,"fillTemplate");function P(e){return document.querySelector(".js-jump-to-suggestions-container").querySelector(e).firstElementChild}l(P,"getTemplateElement");var he=Object.defineProperty,le=(e,t)=>he(e,"name",{value:t,configurable:!0});function de(e,t,o){const n=t.replace(/\s/g,"").toLowerCase(),r=e.filter(c=>c.path!==o);return n?J(r,le(c=>{const u=c.name,i=N(u,n);return i>0?{score:i,text:u}:null},"key"),M):r}le(de,"filterSuggestions");var Se=Object.defineProperty,A=(e,t)=>Se(e,"name",{value:t,configurable:!0});function pe(){return!!document.querySelector(".js-jump-to-field")}A(pe,"isJumpToAvailable");function T(e,t){const o=e.value.trim(),n=me(de(t,o,window.location.pathname),q()),r=n.slice(0,7);g({result_count:n.length.toString(),display_count:r.length.toString(),filter_count:(t.length-n.length).toString(),query:o,display_set:JSON.stringify(r.map(a=>[a.type,a.databaseId]))}),se(e,o,r),p("menu-activation")||p("query")}A(T,"populateDropdown");function me(e,t){const o=H(t);return e.sort((n,r)=>o(r.pageKey)-o(n.pageKey))}A(me,"rank");var be=Object.defineProperty,C=(e,t)=>be(e,"name",{value:t,configurable:!0});let w;W(".js-jump-to-field",{constructor:HTMLInputElement,add(e){e.addEventListener("input",Q(async function(){L(e),I(e),T(e,await w)},100)),document.activeElement&&document.activeElement===e&&R(e)}});async function ge(e){const t=e.getAttribute("data-jump-to-suggestions-path");if(!t)throw new Error("could not get jump to suggestions path");const o=Y(),n=B(e,"js-data-jump-to-suggestions-path-csrf");if(!n)return[];let r=[];const a=await fetch(t,{method:"POST",mode:"same-origin",body:o,headers:{Accept:"application/json","Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}});a.ok&&(r=Z(await a.json()));const c=document.querySelector(".js-search-commands");if(c instanceof HTMLInputElement){const u=c.value;let i=[];try{i=JSON.parse(u).commands}catch{}r=r.concat(i)}return r}C(ge,"fetchSuggestions");async function R(e){const t=e;re(t),_(t),w||(w=ge(t)),L(t),I(t),T(t,await w)}C(R,"onJumpToFocus"),z(".js-jump-to-field",R),d("navigation:keydown",".js-site-search-form",function(e){const t=e.currentTarget.querySelector(".js-navigation-item.navigation-focus");switch(e.detail.hotkey){case"Enter":if(t)x(t.querySelector(".js-jump-to-suggestion-path"));else{const o=e.currentTarget;V(o)}break;case"Escape":e.currentTarget.querySelector(".js-jump-to-field").blur(),k();break}}),d("navigation:focus",".js-site-search-form",function(e){const t=document.querySelector(".js-jump-to-field"),o=e.target.id,n=e.target.closest(".js-jump-to-suggestions-results-container");for(const r of n.querySelectorAll(".js-navigation-item"))r.setAttribute("aria-selected",(e.target===r).toString());t.setAttribute("aria-activedescendant",o)});let $=null;d("focusout",".js-jump-to",function(){const e=document.querySelector(".js-jump-to-field");$=window.setTimeout(()=>{ae(e),k()},200)}),d("focusin",".js-jump-to",function(){$&&window.clearTimeout($);const e=document.querySelector(".js-jump-to-field");_(e)}),d("click",".js-jump-to-suggestion-path",function(e){const t=e.currentTarget;if(t.getAttribute("data-target-type")==="Search"){const o=document.querySelector(".js-jump-to-field");t.href=ee(o.value.trim(),t.href)}x(t)}),d("submit",".js-site-search-form",function(e){if(!pe())return;e.target.getAttribute("data-scoped-search-url")&&g({}),p("search")});function I(e){const t=e.value.trim(),o=document.querySelector(".js-jump-to-suggestions-results-container");t?G(o):X(o)}C(I,"enableNavigation")}}});
//# sourceMappingURL=chunk-jump-to-272a9b32.js.map
