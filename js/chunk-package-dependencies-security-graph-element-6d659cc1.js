System.register(["./chunk-vendor.js","./chunk-band.js","./chunk-linear.js","./chunk-tip.js","./chunk-frameworks.js","./chunk-range.js","./chunk-axis.js"],function(){"use strict";var g,f,m,b,v,w,y,x,k,j,L,$,_;return{setters:[function(a){g=a.t,f=a.c},function(a){m=a.b},function(a){b=a.l,v=a.m,w=a.f,y=a.s},function(a){x=a.d},function(a){k=a.m,j=a.aT},function(a){L=a.r},function(a){$=a.a,_=a.b}],execute:function(){var a=Object.defineProperty,C=Object.getOwnPropertyDescriptor,p=(n,r)=>a(n,"name",{value:r,configurable:!0}),D=(n,r,t,i)=>{for(var s=i>1?void 0:i?C(r,t):r,l=n.length-1,o;l>=0;l--)(o=n[l])&&(s=(i?o(r,t,s):o(s))||s);return i&&s&&a(r,t,s),s};const F=k(P);async function P(n){return await(await j(n,{headers:{accept:"application/json"}})).json()}p(P,"fetchData");let c=class extends HTMLElement{async connectedCallback(){const n=this.graph,r=n.getAttribute("data-url");if(!!r){for(const t of n.querySelectorAll("svg.viz"))t.remove();n.classList.add("is-graph-loading"),n.classList.remove("is-graph-load-error","is-graph-empty");try{const t=await F(r);n.classList.remove("is-graph-loading"),t!=null&&t.unusable?n.classList.add("is-graph-without-usable-data"):t!=null&&t.length===0||t!=null&&t.summary!=null&&t.summary.total===0||t[0]!=null&&t[0].weeks!=null&&t[0].weeks.length===0?n.classList.add("is-graph-empty"):S(n,t)}catch(t){throw n.classList.remove("is-graph-loading"),n.classList.add("is-graph-load-error"),t}}}};p(c,"PackageDependenciesSecurityGraphElement"),D([g],c.prototype,"graph",2),c=D([f],c);function S(n,r){const t={top:10,right:0,bottom:20,left:30},i=Math.round(n.getBoundingClientRect().width)-t.left-t.right,s=Math.round(n.getBoundingClientRect().height)-t.top-t.bottom,l=m().domain(L(r.length)).rangeRound([0,i]).padding(.2),o=$(l).ticks(r.length).tickFormat(()=>""),u=b().domain([0,v(r,e=>e.count)+5]).range([s,0]),O=_(u).ticks(3).tickSize(-i).tickFormat(e=>w(",~s")(e)),h=y(n).append("svg").attr("width",i+t.left+t.right).attr("height",s+t.top+t.bottom).append("g").attr("transform",`translate(${t.left}, ${t.top})`),d=x().attr("class","svg-tip color-text-white").offset([-10,0]).html(e=>`${new Intl.NumberFormat("en-US").format(e.count)} ${e.count===1?"vulnerability":"vulnerabilities"} affecting ${new Intl.NumberFormat("en-US").format(e.dependents)} ${e.dependents===1?"dependent":"dependents"}`);h.call(d),h.append("g").attr("class","y axis").call(O),h.append("g").attr("class","x axis").attr("transform",`translate(0, ${s})`).call(o);const A=h.selectAll(".bar").data(r).enter().append("g").attr("transform",(e,z)=>`translate(${l(z)}, 0)`).append("a").attr("class","no-underline").attr("aria-label",e=>`Filter to ${e.label} severity vulnerabilities`).attr("xlink:href",e=>e.url),R=A.append("rect").attr("class",e=>`alert-label--${e.label.toLowerCase()}`).attr("width",l.bandwidth()).attr("height",e=>s-u(e.count)).attr("y",e=>u(e.count)).on("mouseover",d.show).on("mouseout",d.hide);r.find(e=>e.selected)&&R.attr("style",e=>e.selected?"":"fill-opacity: 0.2"),A.append("text").text(e=>e.label).attr("class","axis").attr("text-anchor","middle").attr("y",s+16).attr("x",l.bandwidth()/2)}p(S,"render")}}});
//# sourceMappingURL=chunk-package-dependencies-security-graph-element-e5d2beb0.js.map
