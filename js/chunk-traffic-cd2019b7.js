System.register(["./chunk-linear.js","./chunk-time.js","./chunk-array.js","./chunk-format-symbol.js","./chunk-axis.js","./chunk-line.js","./chunk-extent.js","./chunk-min.js","./chunk-pointer.js"],function(at){"use strict";var k,P,T,B,w,U,E,G,L,N,V,C,q,j,A,I,O,J,F,K,Q,W,X,D,S,Z;return{setters:[function(e){k=e.A,P=e.C,T=e.m,B=e.i,w=e.l,U=e.s,E=e.b,G=e.f},function(e){L=e.c,N=e.a,V=e.b},function(e){C=e.n,q=e.b,j=e.c,A=e.u,I=e.g,O=e.h,J=e.i},function(e){F=e.f},function(e){K=e.a,Q=e.b,W=e.c},function(e){X=e.l},function(e){D=e.e},function(e){S=e.m},function(e){Z=e.p}],execute:function(){at("r",tt);function e(t,n,s=0,i=t.length-1,a=k){for(;i>s;){if(i-s>600){const l=i-s+1,m=n-s+1,M=Math.log(l),x=.5*Math.exp(2*M/3),b=.5*Math.sqrt(M*x*(l-x)/l)*(m-l/2<0?-1:1),y=Math.max(s,Math.floor(n-m*x/l+b)),h=Math.min(i,Math.floor(n+(l-m)*x/l+b));e(t,n,y,h,a)}const u=t[n];let f=s,o=i;for(v(t,s,n),a(t[i],u)>0&&v(t,s,i);f<o;){for(v(t,f,o),++f,--o;a(t[f],u)<0;)++f;for(;a(t[o],u)>0;)--o}a(t[s],u)===0?v(t,s,o):(++o,v(t,o,i)),o<=n&&(s=o+1),n<=o&&(i=o-1)}return t}function v(t,n,s){const i=t[n];t[n]=t[s],t[s]=i}function rt(t,n,s){if(t=Float64Array.from(P(t,s)),!!(i=t.length)){if((n=+n)<=0||i<2)return S(t);if(n>=1)return T(t);var i,a=(i-1)*n,u=Math.floor(a),f=T(e(t,u).subarray(0,u+1)),o=S(t.subarray(u+1));return f+(o-f)*(a-u)}}function ut(t,n){return rt(t,.5,n)}var ft=C(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*q)},function(t,n){return(n-t)/q},function(t){return t.getUTCMinutes()}),lt=C(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*j)},function(t,n){return(n-t)/j},function(t){return t.getUTCHours()}),ht=C(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});function mt(){return B.apply(L(J,ht,O,I,lt,ft,V,N,A).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var gt=Object.defineProperty,$=(t,n)=>gt(t,"name",{value:n,configurable:!0});function H(t){return G(",")(t)}$(H,"numberFormat");function tt(t,n,s,i){const a=i.margin,u=i.width-a.left-a.right,f=i.height-a.top-a.bottom;if(!n||n.error!=null)return;const o=mt().range([0,u]);let l=w().range([f,0]);const m=w().range([f,0]),M=A("%m/%d"),x=K(o).ticks(n.counts.length).tickSize(f+5).tickPadding(10).tickFormat(M);let b=Q(l).ticks(3).tickFormat(F);const y=X().x(c=>o(c.key)).y(c=>l(c.value)),h=U(t).select(".js-graph").append("svg").attr("viewBox",`0 0 ${u+a.left+a.right} ${f+a.top+a.bottom}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${a.left},${a.top})`).call(s),g=n.counts;for(const c of g)c.date=new Date(c.bucket*1e3);g.sort((c,r)=>k(c.date,r.date));const dt=E(c=>c.date).left;function nt(c){let r;const p=o.invert(Z(c)[0]),d=dt(g,p,1),Y=g[d-1],_=g[d];if(Y&&_){const it=p-Y.date>_.date-p?_:Y;return r=h.selectAll("g.dots circle").filter(z=>z.key===it.date),r=r.nodes(),r.sort((z,Mt)=>Number(z.getAttribute("cy"))-Number(Mt.getAttribute("cy"))),s.show({target:r[0]},it)}}$(nt,"showFocusedValue");const et=g.map(c=>({key:c.date,value:c.total})),R=g.map(c=>({key:c.date,value:c.unique})),ct=[et,R],[pt,xt]=D(g,c=>c.date.getTime()),bt=D(et,c=>c.value)[1],vt=T(R,c=>c.value)+ut(R,c=>c.value);o.domain([pt,xt]),l.domain([0,bt]),m.domain([0,vt]);const Tt=n.summary.total,st=t.querySelector(".js-traffic-total");st&&(st.textContent=H(Tt));const Ct=n.summary.unique,ot=t.querySelector(".js-traffic-uniques");ot&&(ot.textContent=H(Ct)),h.append("g").attr("class","x axis").call(x),h.append("g").attr("class","y axis views").call(b),h.selectAll("path.path").data(ct).enter().append("path").attr("class",(c,r)=>`path ${r===0?"total":"unique"}`).attr("d",(c,r)=>r===0?y(c):y.y(p=>m(p.value))(c)),h.selectAll("g.dots").data(ct).enter().append("g").attr("class",(c,r)=>r===0?"dots totals":"dots uniques").each(function(c,r){const p=U(this);return r===1&&(l=m),p.selectAll("circle").data(d=>d).enter().append("circle").attr("cx",d=>o(d.key)).attr("cy",d=>l(d.value)).attr("r",4)}),b=W(m).ticks(3).tickFormat(F),h.append("g").attr("class","y axis unique").attr("transform",`translate(${u}, 0)`).call(b),h.append("rect").attr("class","overlay").attr("width",u).attr("height",f).on("mousemove",nt).on("mouseout",function(){setTimeout(s.hide,500)})}$(tt,"renderTrafficGraph")}}});
//# sourceMappingURL=chunk-traffic-f77bfe3e.js.map
