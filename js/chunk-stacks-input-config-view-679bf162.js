System.register(["./chunk-frameworks.js","./chunk-vendor.js"],function(){"use strict";var l,d,p,m,h;return{setters:[function(t){l=t.u,d=t.c,p=t.k},function(t){m=t.o,h=t.a}],execute:function(){var t=Object.defineProperty,i=(e,n)=>t(e,"name",{value:n,configurable:!0});const g=30*1e3,R=10*1e3,S=30;let E=Date.now(),a=0;function r(){const e=document.querySelector(".js-stacks-apps-status-channel");e&&(l(e),u())}i(r,"refreshAppSection");function s(){const e=Math.floor(a/10)*R;return g+e}i(s,"getRefreshInterval");function u(){E=Date.now()}i(u,"updateLastRefreshTime");function c(){const e=Date.now()-E;e>=s()?(r(),a++,a<=S&&setTimeout(c,s())):setTimeout(c,s()-e)}i(c,"checkAndRefreshAppSection");function f(){document.hidden||r()}i(f,"handleVisibilityChange");var b=Object.defineProperty,_=(e,n)=>b(e,"name",{value:n,configurable:!0});const y="STACKS_APP_CONFIGURE_EVENT";function o(){const e=document.querySelector(".js-stacks-initialize-submit");if(document.querySelector(".js-stacks-app-configure"))e.disabled=!0;else{const n=document.getElementById("stack_instance_repository_form");n&&(e.disabled=!n.checkValidity())}}_(o,"disableInitializeIfNecessary"),m(".js-stacks-apps-status-channel",{add(){o()},subscribe:e=>d(e,"socket:message",function(){u()})}),h("click",".js-stacks-app-configure",function(e){const T=e.currentTarget.getAttribute("data-app-slug"),k=document.getElementById("stack-template-link"),A=k==null?void 0:k.innerHTML;p(y,{app_slug:T,template_repo:A||""})});function v(){o();const e=document.querySelector(".js-stacks-config-form");e==null||e.addEventListener("change",()=>{o()}),e==null||e.addEventListener("submit",()=>{document.removeEventListener("visibilitychange",f,!1)}),document.addEventListener("visibilitychange",f,!1),setTimeout(c,g)}_(v,"initializeConfigView"),v()}}});
//# sourceMappingURL=chunk-stacks-input-config-view-37eea2ea.js.map
