System.register(["./chunk-index7.js","./chunk-linear.js","./chunk-pointer.js","./chunk-nodrag.js","./chunk-vendor.js","./chunk-range.js"],function(Fe){"use strict";var At,Dn,Dt,Yt,Xt,qt,jt,Pn,V,Ft,Ot,pn,Bt,Gt,Zt,vn;return{setters:[function(X){At=X.d,Dn=X.i,Dt=X.t},function(X){Yt=X.t,Xt=X.a,qt=X.c,jt=X.i,Pn=X.d,V=X.s,Ft=X.m,Ot=X.f},function(X){pn=X.p},function(X){Bt=X.d,Gt=X.y},function(X){Zt=X.a},function(X){vn=X.r}],execute:function(){Fe("r",je);class X{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const s=i[r],c=t+s,g=Math.abs(t)<Math.abs(s)?t-(c-s):s-(c-t);g&&(i[e++]=g),t=c}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,s,c=0;if(i>0){for(c=t[--i];i>0&&(e=c,r=t[--i],c=e+r,s=r-(c-e),!s););i>0&&(s<0&&t[i-1]<0||s>0&&t[i-1]>0)&&(r=s*2,e=c+r,r==e-c&&(c=e))}return c}}function*Oe(n){for(const t of n)yield*t}function Wt(n){return Array.from(Oe(n))}var _n=Math.SQRT2,rt=2,Vt=4,Be=1e-12;function Ht(n){return((n=Math.exp(n))+1/n)/2}function Ge(n){return((n=Math.exp(n))-1/n)/2}function Ze(n){return((n=Math.exp(2*n))-1)/(n+1)}function We(n,t){var i=n[0],e=n[1],r=n[2],s=t[0],c=t[1],g=t[2],y=s-i,d=c-e,o=y*y+d*d,u,f;if(o<Be)f=Math.log(g/r)/_n,u=function($){return[i+$*y,e+$*d,r*Math.exp(_n*$*f)]};else{var p=Math.sqrt(o),v=(g*g-r*r+Vt*o)/(2*r*rt*p),_=(g*g-r*r-Vt*o)/(2*g*rt*p),E=Math.log(Math.sqrt(v*v+1)-v),m=Math.log(Math.sqrt(_*_+1)-_);f=(m-E)/_n,u=function($){var S=$*f,x=Ht(E),C=r/(rt*p)*(x*Ze(_n*S+E)-Ge(E));return[i+C*y,e+C*d,r*x/Ht(_n*S+E)]}}return u.duration=f*1e3,u}function Ut(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function Ve(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function He(n){return n<0?-n*n:n*n}function Ue(n){var t=n(Pn,Pn),i=1;function e(){return i===1?n(Pn,Pn):i===.5?n(Ve,He):n(Ut(i),Ut(1/i))}return t.exponent=function(r){return arguments.length?(i=+r,e()):i},Xt(t)}function Kt(){var n=Ue(Yt());return n.copy=function(){return qt(n,Kt()).exponent(n.exponent())},jt.apply(n,arguments),n}function Ke(){return Kt.apply(null,arguments).exponent(.5)}function Je(n){return n}function Qe(n){if(n==null)return Je;var t,i,e=n.scale[0],r=n.scale[1],s=n.translate[0],c=n.translate[1];return function(g,y){y||(t=i=0);var d=2,o=g.length,u=new Array(o);for(u[0]=(t+=g[0])*e+s,u[1]=(i+=g[1])*r+c;d<o;)u[d]=g[d],++d;return u}}function be(n,t){for(var i,e=n.length,r=e-t;r<--e;)i=n[r],n[r++]=n[e],n[e]=i}function ni(n,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(i){return Jt(n,i)})}:Jt(n,t)}function Jt(n,t){var i=t.id,e=t.bbox,r=t.properties==null?{}:t.properties,s=Qt(n,t);return i==null&&e==null?{type:"Feature",properties:r,geometry:s}:e==null?{type:"Feature",id:i,properties:r,geometry:s}:{type:"Feature",id:i,bbox:e,properties:r,geometry:s}}function Qt(n,t){var i=Qe(n.transform),e=n.arcs;function r(o,u){u.length&&u.pop();for(var f=e[o<0?~o:o],p=0,v=f.length;p<v;++p)u.push(i(f[p],p));o<0&&be(u,v)}function s(o){return i(o)}function c(o){for(var u=[],f=0,p=o.length;f<p;++f)r(o[f],u);return u.length<2&&u.push(u[0]),u}function g(o){for(var u=c(o);u.length<4;)u.push(u[0]);return u}function y(o){return o.map(g)}function d(o){var u=o.type,f;switch(u){case"GeometryCollection":return{type:u,geometries:o.geometries.map(d)};case"Point":f=s(o.coordinates);break;case"MultiPoint":f=o.coordinates.map(s);break;case"LineString":f=c(o.arcs);break;case"MultiLineString":f=o.arcs.map(c);break;case"Polygon":f=y(o.arcs);break;case"MultiPolygon":f=o.arcs.map(y);break;default:return null}return{type:u,coordinates:f}}return d(t)}function ti(n,t){var i={},e={},r={},s=[],c=-1;t.forEach(function(d,o){var u=n.arcs[d<0?~d:d],f;u.length<3&&!u[1][0]&&!u[1][1]&&(f=t[++c],t[c]=d,t[o]=f)}),t.forEach(function(d){var o=g(d),u=o[0],f=o[1],p,v;if(p=r[u])if(delete r[p.end],p.push(d),p.end=f,v=e[f]){delete e[v.start];var _=v===p?p:p.concat(v);e[_.start=p.start]=r[_.end=v.end]=_}else e[p.start]=r[p.end]=p;else if(p=e[f])if(delete e[p.start],p.unshift(d),p.start=u,v=r[u]){delete r[v.end];var E=v===p?p:v.concat(p);e[E.start=v.start]=r[E.end=p.end]=E}else e[p.start]=r[p.end]=p;else p=[d],e[p.start=u]=r[p.end=f]=p});function g(d){var o=n.arcs[d<0?~d:d],u=o[0],f;return n.transform?(f=[0,0],o.forEach(function(p){f[0]+=p[0],f[1]+=p[1]})):f=o[o.length-1],d<0?[f,u]:[u,f]}function y(d,o){for(var u in d){var f=d[u];delete o[f.start],delete f.start,delete f.end,f.forEach(function(p){i[p<0?~p:p]=1}),s.push(f)}}return y(r,e),y(e,r),t.forEach(function(d){i[d<0?~d:d]||s.push([d])}),s}function bt(n){return Qt(n,ei.apply(this,arguments))}function ei(n,t,i){var e,r,s;if(arguments.length>1)e=ii(n,t,i);else for(r=0,e=new Array(s=n.arcs.length);r<s;++r)e[r]=r;return{type:"MultiLineString",arcs:ti(n,e)}}function ii(n,t,i){var e=[],r=[],s;function c(u){var f=u<0?~u:u;(r[f]||(r[f]=[])).push({i:u,g:s})}function g(u){u.forEach(c)}function y(u){u.forEach(g)}function d(u){u.forEach(y)}function o(u){switch(s=u,u.type){case"GeometryCollection":u.geometries.forEach(o);break;case"LineString":g(u.arcs);break;case"MultiLineString":case"Polygon":y(u.arcs);break;case"MultiPolygon":d(u.arcs);break}}return o(t),r.forEach(i==null?function(u){e.push(u[0].i)}:function(u){i(u[0].g,u[u.length-1].g)&&e.push(u[0].i)}),e}var A=1e-6,ot=1e-12,Y=Math.PI,tn=Y/2,ne=Y/4,en=Y*2,on=180/Y,G=Y/180,B=Math.abs,ri=Math.atan,mn=Math.atan2,q=Math.cos,Yn=Math.ceil,ut=Math.hypot,j=Math.sin,oi=Math.sign||function(n){return n>0?1:n<0?-1:0},gn=Math.sqrt;function ui(n){return n>1?0:n<-1?Y:Math.acos(n)}function yn(n){return n>1?tn:n<-1?-tn:Math.asin(n)}function b(){}function Xn(n,t){n&&ee.hasOwnProperty(n.type)&&ee[n.type](n,t)}var te={Feature:function(n,t){Xn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)Xn(i[e].geometry,t)}},ee={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){at(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)at(i[e],t,0)},Polygon:function(n,t){ie(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)ie(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)Xn(i[e],t)}};function at(n,t,i){var e=-1,r=n.length-i,s;for(t.lineStart();++e<r;)s=n[e],t.point(s[0],s[1],s[2]);t.lineEnd()}function ie(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)at(n[i],t,1);t.polygonEnd()}function Sn(n,t){n&&te.hasOwnProperty(n.type)?te[n.type](n,t):Xn(n,t)}function ct(n){return[mn(n[1],n[0]),yn(n[2])]}function wn(n){var t=n[0],i=n[1],e=q(i);return[e*q(t),e*j(t),j(i)]}function qn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function jn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function st(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Fn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function lt(n){var t=gn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var $n,On,Bn,Gn,Zn,Wn,Vn,Hn,ft,ht,pt,re,oe,K,J,Q,un={sphere:b,point:gt,lineStart:ue,lineEnd:ae,polygonStart:function(){un.lineStart=si,un.lineEnd=li},polygonEnd:function(){un.lineStart=ue,un.lineEnd=ae}};function gt(n,t){n*=G,t*=G;var i=q(t);xn(i*q(n),i*j(n),j(t))}function xn(n,t,i){++$n,Bn+=(n-Bn)/$n,Gn+=(t-Gn)/$n,Zn+=(i-Zn)/$n}function ue(){un.point=ai}function ai(n,t){n*=G,t*=G;var i=q(t);K=i*q(n),J=i*j(n),Q=j(t),un.point=ci,xn(K,J,Q)}function ci(n,t){n*=G,t*=G;var i=q(t),e=i*q(n),r=i*j(n),s=j(t),c=mn(gn((c=J*s-Q*r)*c+(c=Q*e-K*s)*c+(c=K*r-J*e)*c),K*e+J*r+Q*s);On+=c,Wn+=c*(K+(K=e)),Vn+=c*(J+(J=r)),Hn+=c*(Q+(Q=s)),xn(K,J,Q)}function ae(){un.point=gt}function si(){un.point=fi}function li(){ce(re,oe),un.point=gt}function fi(n,t){re=n,oe=t,n*=G,t*=G,un.point=ce;var i=q(t);K=i*q(n),J=i*j(n),Q=j(t),xn(K,J,Q)}function ce(n,t){n*=G,t*=G;var i=q(t),e=i*q(n),r=i*j(n),s=j(t),c=J*s-Q*r,g=Q*e-K*s,y=K*r-J*e,d=ut(c,g,y),o=yn(d),u=d&&-o/d;ft.add(u*c),ht.add(u*g),pt.add(u*y),On+=o,Wn+=o*(K+(K=e)),Vn+=o*(J+(J=r)),Hn+=o*(Q+(Q=s)),xn(K,J,Q)}function hi(n){$n=On=Bn=Gn=Zn=Wn=Vn=Hn=0,ft=new X,ht=new X,pt=new X,Sn(n,un);var t=+ft,i=+ht,e=+pt,r=ut(t,i,e);return r<ot&&(t=Wn,i=Vn,e=Hn,On<A&&(t=Bn,i=Gn,e=Zn),r=ut(t,i,e),r<ot)?[NaN,NaN]:[mn(i,t)*on,yn(e/r)*on]}function dt(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function vt(n,t){return[B(n)>Y?n+Math.round(-n/en)*en:n,t]}vt.invert=vt;function pi(n,t,i){return(n%=en)?t||i?dt(le(n),fe(t,i)):le(n):t||i?fe(t,i):vt}function se(n){return function(t,i){return t+=n,[t>Y?t-en:t<-Y?t+en:t,i]}}function le(n){var t=se(n);return t.invert=se(-n),t}function fe(n,t){var i=q(n),e=j(n),r=q(t),s=j(t);function c(g,y){var d=q(y),o=q(g)*d,u=j(g)*d,f=j(y),p=f*i+o*e;return[mn(u*r-p*s,o*i-f*e),yn(p*r+u*s)]}return c.invert=function(g,y){var d=q(y),o=q(g)*d,u=j(g)*d,f=j(y),p=f*r-u*s;return[mn(u*r+f*s,o*i+p*e),yn(p*i-o*e)]},c}function gi(n,t,i,e,r,s){if(!!i){var c=q(t),g=j(t),y=e*i;r==null?(r=t+e*en,s=t-y/2):(r=he(c,r),s=he(c,s),(e>0?r<s:r>s)&&(r+=e*en));for(var d,o=r;e>0?o>s:o<s;o-=y)d=ct([c,-g*q(o),-g*j(o)]),n.point(d[0],d[1])}}function he(n,t){t=wn(t),t[0]-=n,lt(t);var i=ui(-t[1]);return((-t[2]<0?-i:i)+en-A)%en}function pe(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:b,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function Un(n,t){return B(n[0]-t[0])<A&&B(n[1]-t[1])<A}function Kn(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ge(n,t,i,e,r){var s=[],c=[],g,y;if(n.forEach(function(v){if(!((_=v.length-1)<=0)){var _,E=v[0],m=v[_],$;if(Un(E,m)){if(!E[2]&&!m[2]){for(r.lineStart(),g=0;g<_;++g)r.point((E=v[g])[0],E[1]);r.lineEnd();return}m[0]+=2*A}s.push($=new Kn(E,v,null,!0)),c.push($.o=new Kn(E,null,$,!1)),s.push($=new Kn(m,v,null,!1)),c.push($.o=new Kn(m,null,$,!0))}}),!!s.length){for(c.sort(t),de(s),de(c),g=0,y=c.length;g<y;++g)c[g].e=i=!i;for(var d=s[0],o,u;;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;o=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(g=0,y=o.length;g<y;++g)r.point((u=o[g])[0],u[1]);else e(f.x,f.n.x,1,r);f=f.n}else{if(p)for(o=f.p.z,g=o.length-1;g>=0;--g)r.point((u=o[g])[0],u[1]);else e(f.x,f.p.x,-1,r);f=f.p}f=f.o,o=f.z,p=!p}while(!f.v);r.lineEnd()}}}function de(n){if(!!(t=n.length)){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function mt(n){return B(n[0])<=Y?n[0]:oi(n[0])*((B(n[0])+Y)%en-Y)}function di(n,t){var i=mt(t),e=t[1],r=j(e),s=[j(i),-q(i),0],c=0,g=0,y=new X;r===1?e=tn+A:r===-1&&(e=-tn-A);for(var d=0,o=n.length;d<o;++d)if(!!(f=(u=n[d]).length))for(var u,f,p=u[f-1],v=mt(p),_=p[1]/2+ne,E=j(_),m=q(_),$=0;$<f;++$,v=x,E=N,m=D,p=S){var S=u[$],x=mt(S),C=S[1]/2+ne,N=j(C),D=q(C),T=x-v,I=T>=0?1:-1,O=I*T,L=O>Y,H=E*N;if(y.add(mn(H*I*j(O),m*D+H*q(O))),c+=L?T+I*en:T,L^v>=i^x>=i){var R=jn(wn(p),wn(S));lt(R);var a=jn(s,R);lt(a);var l=(L^T>=0?-1:1)*yn(a[2]);(e>l||e===l&&(R[0]||R[1]))&&(g+=L^T>=0?1:-1)}}return(c<-A||c<A&&y<-ot)^g&1}function ve(n,t,i,e){return function(r){var s=t(r),c=pe(),g=t(c),y=!1,d,o,u,f={point:p,lineStart:_,lineEnd:E,polygonStart:function(){f.point=m,f.lineStart=$,f.lineEnd=S,o=[],d=[]},polygonEnd:function(){f.point=p,f.lineStart=_,f.lineEnd=E,o=Wt(o);var x=di(d,e);o.length?(y||(r.polygonStart(),y=!0),ge(o,mi,x,i,r)):x&&(y||(r.polygonStart(),y=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),y&&(r.polygonEnd(),y=!1),o=d=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(x,C){n(x,C)&&r.point(x,C)}function v(x,C){s.point(x,C)}function _(){f.point=v,s.lineStart()}function E(){f.point=p,s.lineEnd()}function m(x,C){u.push([x,C]),g.point(x,C)}function $(){g.lineStart(),u=[]}function S(){m(u[0][0],u[0][1]),g.lineEnd();var x=g.clean(),C=c.result(),N,D=C.length,T,I,O;if(u.pop(),d.push(u),u=null,!!D){if(x&1){if(I=C[0],(T=I.length-1)>0){for(y||(r.polygonStart(),y=!0),r.lineStart(),N=0;N<T;++N)r.point((O=I[N])[0],O[1]);r.lineEnd()}return}D>1&&x&2&&C.push(C.pop().concat(C.shift())),o.push(C.filter(vi))}}return f}}function vi(n){return n.length>1}function mi(n,t){return((n=n.x)[0]<0?n[1]-tn-A:tn-n[1])-((t=t.x)[0]<0?t[1]-tn-A:tn-t[1])}var me=ve(function(){return!0},yi,Ei,[-Y,-tn]);function yi(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,c){var g=s>0?Y:-Y,y=B(s-t);B(y-Y)<A?(n.point(t,i=(i+c)/2>0?tn:-tn),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(g,i),n.point(s,i),r=0):e!==g&&y>=Y&&(B(t-e)<A&&(t-=e*A),B(s-g)<A&&(s-=g*A),i=Si(t,i,s,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(g,i),r=0),n.point(t=s,i=c),e=g},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function Si(n,t,i,e){var r,s,c=j(n-i);return B(c)>A?ri((j(t)*(s=q(e))*j(i)-j(e)*(r=q(t))*j(n))/(r*s*c)):(t+e)/2}function Ei(n,t,i,e){var r;if(n==null)r=i*tn,e.point(-Y,r),e.point(0,r),e.point(Y,r),e.point(Y,0),e.point(Y,-r),e.point(0,-r),e.point(-Y,-r),e.point(-Y,0),e.point(-Y,r);else if(B(n[0]-t[0])>A){var s=n[0]<t[0]?Y:-Y;r=i*s/2,e.point(-s,r),e.point(0,r),e.point(s,r)}else e.point(t[0],t[1])}function wi(n){var t=q(n),i=6*G,e=t>0,r=B(t)>A;function s(o,u,f,p){gi(p,n,i,f,o,u)}function c(o,u){return q(o)*q(u)>t}function g(o){var u,f,p,v,_;return{lineStart:function(){v=p=!1,_=1},point:function(E,m){var $=[E,m],S,x=c(E,m),C=e?x?0:d(E,m):x?d(E+(E<0?Y:-Y),m):0;if(!u&&(v=p=x)&&o.lineStart(),x!==p&&(S=y(u,$),(!S||Un(u,S)||Un($,S))&&($[2]=1)),x!==p)_=0,x?(o.lineStart(),S=y($,u),o.point(S[0],S[1])):(S=y(u,$),o.point(S[0],S[1],2),o.lineEnd()),u=S;else if(r&&u&&e^x){var N;!(C&f)&&(N=y($,u,!0))&&(_=0,e?(o.lineStart(),o.point(N[0][0],N[0][1]),o.point(N[1][0],N[1][1]),o.lineEnd()):(o.point(N[1][0],N[1][1]),o.lineEnd(),o.lineStart(),o.point(N[0][0],N[0][1],3)))}x&&(!u||!Un(u,$))&&o.point($[0],$[1]),u=$,p=x,f=C},lineEnd:function(){p&&o.lineEnd(),u=null},clean:function(){return _|(v&&p)<<1}}}function y(o,u,f){var p=wn(o),v=wn(u),_=[1,0,0],E=jn(p,v),m=qn(E,E),$=E[0],S=m-$*$;if(!S)return!f&&o;var x=t*m/S,C=-t*$/S,N=jn(_,E),D=Fn(_,x),T=Fn(E,C);st(D,T);var I=N,O=qn(D,I),L=qn(I,I),H=O*O-L*(qn(D,D)-1);if(!(H<0)){var R=gn(H),a=Fn(I,(-O-R)/L);if(st(a,D),a=ct(a),!f)return a;var l=o[0],h=u[0],M=o[1],w=u[1],k;h<l&&(k=l,l=h,h=k);var P=h-l,z=B(P-Y)<A,F=z||P<A;if(!z&&w<M&&(k=M,M=w,w=k),F?z?M+w>0^a[1]<(B(a[0]-l)<A?M:w):M<=a[1]&&a[1]<=w:P>Y^(l<=a[0]&&a[0]<=h)){var Z=Fn(I,(-O+R)/L);return st(Z,D),[a,ct(Z)]}}}function d(o,u){var f=e?n:Y-n,p=0;return o<-f?p|=1:o>f&&(p|=2),u<-f?p|=4:u>f&&(p|=8),p}return ve(c,g,s,e?[0,-n]:[-Y,n-Y])}function Mi(n,t,i,e,r,s){var c=n[0],g=n[1],y=t[0],d=t[1],o=0,u=1,f=y-c,p=d-g,v;if(v=i-c,!(!f&&v>0)){if(v/=f,f<0){if(v<o)return;v<u&&(u=v)}else if(f>0){if(v>u)return;v>o&&(o=v)}if(v=r-c,!(!f&&v<0)){if(v/=f,f<0){if(v>u)return;v>o&&(o=v)}else if(f>0){if(v<o)return;v<u&&(u=v)}if(v=e-g,!(!p&&v>0)){if(v/=p,p<0){if(v<o)return;v<u&&(u=v)}else if(p>0){if(v>u)return;v>o&&(o=v)}if(v=s-g,!(!p&&v<0)){if(v/=p,p<0){if(v>u)return;v>o&&(o=v)}else if(p>0){if(v<o)return;v<u&&(u=v)}return o>0&&(n[0]=c+o*f,n[1]=g+o*p),u<1&&(t[0]=c+u*f,t[1]=g+u*p),!0}}}}}var kn=1e9,Jn=-kn;function zi(n,t,i,e){function r(d,o){return n<=d&&d<=i&&t<=o&&o<=e}function s(d,o,u,f){var p=0,v=0;if(d==null||(p=c(d,u))!==(v=c(o,u))||y(d,o)<0^u>0)do f.point(p===0||p===3?n:i,p>1?e:t);while((p=(p+u+4)%4)!==v);else f.point(o[0],o[1])}function c(d,o){return B(d[0]-n)<A?o>0?0:3:B(d[0]-i)<A?o>0?2:1:B(d[1]-t)<A?o>0?1:0:o>0?3:2}function g(d,o){return y(d.x,o.x)}function y(d,o){var u=c(d,1),f=c(o,1);return u!==f?u-f:u===0?o[1]-d[1]:u===1?d[0]-o[0]:u===2?d[1]-o[1]:o[0]-d[0]}return function(d){var o=d,u=pe(),f,p,v,_,E,m,$,S,x,C,N,D={point:T,lineStart:H,lineEnd:R,polygonStart:O,polygonEnd:L};function T(l,h){r(l,h)&&o.point(l,h)}function I(){for(var l=0,h=0,M=p.length;h<M;++h)for(var w=p[h],k=1,P=w.length,z=w[0],F,Z,W=z[0],U=z[1];k<P;++k)F=W,Z=U,z=w[k],W=z[0],U=z[1],Z<=e?U>e&&(W-F)*(e-Z)>(U-Z)*(n-F)&&++l:U<=e&&(W-F)*(e-Z)<(U-Z)*(n-F)&&--l;return l}function O(){o=u,f=[],p=[],N=!0}function L(){var l=I(),h=N&&l,M=(f=Wt(f)).length;(h||M)&&(d.polygonStart(),h&&(d.lineStart(),s(null,null,1,d),d.lineEnd()),M&&ge(f,g,l,s,d),d.polygonEnd()),o=d,f=p=v=null}function H(){D.point=a,p&&p.push(v=[]),C=!0,x=!1,$=S=NaN}function R(){f&&(a(_,E),m&&x&&u.rejoin(),f.push(u.result())),D.point=T,x&&o.lineEnd()}function a(l,h){var M=r(l,h);if(p&&v.push([l,h]),C)_=l,E=h,m=M,C=!1,M&&(o.lineStart(),o.point(l,h));else if(M&&x)o.point(l,h);else{var w=[$=Math.max(Jn,Math.min(kn,$)),S=Math.max(Jn,Math.min(kn,S))],k=[l=Math.max(Jn,Math.min(kn,l)),h=Math.max(Jn,Math.min(kn,h))];Mi(w,k,n,t,i,e)?(x||(o.lineStart(),o.point(w[0],w[1])),o.point(k[0],k[1]),M||o.lineEnd(),N=!1):M&&(o.lineStart(),o.point(l,h),N=!1)}$=l,S=h,x=M}return D}}function ye(n,t,i){var e=vn(n,t-A,i).concat(t);return function(r){return e.map(function(s){return[r,s]})}}function Se(n,t,i){var e=vn(n,t-A,i).concat(t);return function(r){return e.map(function(s){return[s,r]})}}function Pi(){var n,t,i,e,r,s,c,g,y=10,d=y,o=90,u=360,f,p,v,_,E=2.5;function m(){return{type:"MultiLineString",coordinates:$()}}function $(){return vn(Yn(e/o)*o,i,o).map(v).concat(vn(Yn(g/u)*u,c,u).map(_)).concat(vn(Yn(t/y)*y,n,y).filter(function(S){return B(S%o)>A}).map(f)).concat(vn(Yn(s/d)*d,r,d).filter(function(S){return B(S%u)>A}).map(p))}return m.lines=function(){return $().map(function(S){return{type:"LineString",coordinates:S}})},m.outline=function(){return{type:"Polygon",coordinates:[v(e).concat(_(c).slice(1),v(i).reverse().slice(1),_(g).reverse().slice(1))]}},m.extent=function(S){return arguments.length?m.extentMajor(S).extentMinor(S):m.extentMinor()},m.extentMajor=function(S){return arguments.length?(e=+S[0][0],i=+S[1][0],g=+S[0][1],c=+S[1][1],e>i&&(S=e,e=i,i=S),g>c&&(S=g,g=c,c=S),m.precision(E)):[[e,g],[i,c]]},m.extentMinor=function(S){return arguments.length?(t=+S[0][0],n=+S[1][0],s=+S[0][1],r=+S[1][1],t>n&&(S=t,t=n,n=S),s>r&&(S=s,s=r,r=S),m.precision(E)):[[t,s],[n,r]]},m.step=function(S){return arguments.length?m.stepMajor(S).stepMinor(S):m.stepMinor()},m.stepMajor=function(S){return arguments.length?(o=+S[0],u=+S[1],m):[o,u]},m.stepMinor=function(S){return arguments.length?(y=+S[0],d=+S[1],m):[y,d]},m.precision=function(S){return arguments.length?(E=+S,f=ye(s,r,90),p=Se(t,n,E),v=ye(g,c,90),_=Se(e,i,E),m):E},m.extentMajor([[-180,-90+A],[180,90-A]]).extentMinor([[-180,-80-A],[180,80+A]])}var yt=n=>n,St=new X,Et=new X,Ee,we,wt,Mt,ln={point:b,lineStart:b,lineEnd:b,polygonStart:function(){ln.lineStart=_i,ln.lineEnd=xi},polygonEnd:function(){ln.lineStart=ln.lineEnd=ln.point=b,St.add(B(Et)),Et=new X},result:function(){var n=St/2;return St=new X,n}};function _i(){ln.point=$i}function $i(n,t){ln.point=Me,Ee=wt=n,we=Mt=t}function Me(n,t){Et.add(Mt*n-wt*t),wt=n,Mt=t}function xi(){Me(Ee,we)}var Mn=1/0,Qn=Mn,Rn=-Mn,bn=Rn,nt={point:ki,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b,result:function(){var n=[[Mn,Qn],[Rn,bn]];return Rn=bn=-(Qn=Mn=1/0),n}};function ki(n,t){n<Mn&&(Mn=n),n>Rn&&(Rn=n),t<Qn&&(Qn=t),t>bn&&(bn=t)}var zt=0,Pt=0,Nn=0,tt=0,et=0,zn=0,_t=0,$t=0,Cn=0,ze,Pe,cn,sn,rn={point:En,lineStart:_e,lineEnd:$e,polygonStart:function(){rn.lineStart=Ci,rn.lineEnd=Li},polygonEnd:function(){rn.point=En,rn.lineStart=_e,rn.lineEnd=$e},result:function(){var n=Cn?[_t/Cn,$t/Cn]:zn?[tt/zn,et/zn]:Nn?[zt/Nn,Pt/Nn]:[NaN,NaN];return zt=Pt=Nn=tt=et=zn=_t=$t=Cn=0,n}};function En(n,t){zt+=n,Pt+=t,++Nn}function _e(){rn.point=Ri}function Ri(n,t){rn.point=Ni,En(cn=n,sn=t)}function Ni(n,t){var i=n-cn,e=t-sn,r=gn(i*i+e*e);tt+=r*(cn+n)/2,et+=r*(sn+t)/2,zn+=r,En(cn=n,sn=t)}function $e(){rn.point=En}function Ci(){rn.point=Ti}function Li(){xe(ze,Pe)}function Ti(n,t){rn.point=xe,En(ze=cn=n,Pe=sn=t)}function xe(n,t){var i=n-cn,e=t-sn,r=gn(i*i+e*e);tt+=r*(cn+n)/2,et+=r*(sn+t)/2,zn+=r,r=sn*n-cn*t,_t+=r*(cn+n),$t+=r*(sn+t),Cn+=r*3,En(cn=n,sn=t)}function ke(n){this._context=n}ke.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,en);break}}},result:b};var xt=new X,kt,Re,Ne,Ln,Tn,In={point:b,lineStart:function(){In.point=Ii},lineEnd:function(){kt&&Ce(Re,Ne),In.point=b},polygonStart:function(){kt=!0},polygonEnd:function(){kt=null},result:function(){var n=+xt;return xt=new X,n}};function Ii(n,t){In.point=Ce,Re=Ln=n,Ne=Tn=t}function Ce(n,t){Ln-=n,Tn-=t,xt.add(gn(Ln*Ln+Tn*Tn)),Ln=n,Tn=t}function Le(){this._string=[]}Le.prototype={_radius:4.5,_circle:Te(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=Te(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function Te(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Ai(n,t){var i=4.5,e,r;function s(c){return c&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),Sn(c,e(r))),r.result()}return s.area=function(c){return Sn(c,e(ln)),ln.result()},s.measure=function(c){return Sn(c,e(In)),In.result()},s.bounds=function(c){return Sn(c,e(nt)),nt.result()},s.centroid=function(c){return Sn(c,e(rn)),rn.result()},s.projection=function(c){return arguments.length?(e=c==null?(n=null,yt):(n=c).stream,s):n},s.context=function(c){return arguments.length?(r=c==null?(t=null,new Le):new ke(t=c),typeof i!="function"&&r.pointRadius(i),s):t},s.pointRadius=function(c){return arguments.length?(i=typeof c=="function"?c:(r.pointRadius(+c),+c),s):i},s.projection(n).context(t)}function Rt(n){return function(t){var i=new Nt;for(var e in n)i[e]=n[e];return i.stream=t,i}}function Nt(){}Nt.prototype={constructor:Nt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ct(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Sn(i,n.stream(nt)),t(nt.result()),e!=null&&n.clipExtent(e),n}function Ie(n,t,i){return Ct(n,function(e){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],c=Math.min(r/(e[1][0]-e[0][0]),s/(e[1][1]-e[0][1])),g=+t[0][0]+(r-c*(e[1][0]+e[0][0]))/2,y=+t[0][1]+(s-c*(e[1][1]+e[0][1]))/2;n.scale(150*c).translate([g,y])},i)}function Di(n,t,i){return Ie(n,[[0,0],t],i)}function Yi(n,t,i){return Ct(n,function(e){var r=+t,s=r/(e[1][0]-e[0][0]),c=(r-s*(e[1][0]+e[0][0]))/2,g=-s*e[0][1];n.scale(150*s).translate([c,g])},i)}function Xi(n,t,i){return Ct(n,function(e){var r=+t,s=r/(e[1][1]-e[0][1]),c=-s*e[0][0],g=(r-s*(e[1][1]+e[0][1]))/2;n.scale(150*s).translate([c,g])},i)}var Ae=16,qi=q(30*G);function De(n,t){return+t?Fi(n,t):ji(n)}function ji(n){return Rt({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function Fi(n,t){function i(e,r,s,c,g,y,d,o,u,f,p,v,_,E){var m=d-e,$=o-r,S=m*m+$*$;if(S>4*t&&_--){var x=c+f,C=g+p,N=y+v,D=gn(x*x+C*C+N*N),T=yn(N/=D),I=B(B(N)-1)<A||B(s-u)<A?(s+u)/2:mn(C,x),O=n(I,T),L=O[0],H=O[1],R=L-e,a=H-r,l=$*R-m*a;(l*l/S>t||B((m*R+$*a)/S-.5)>.3||c*f+g*p+y*v<qi)&&(i(e,r,s,c,g,y,L,H,I,x/=D,C/=D,N,_,E),E.point(L,H),i(L,H,I,x,C,N,d,o,u,f,p,v,_,E))}}return function(e){var r,s,c,g,y,d,o,u,f,p,v,_,E={point:m,lineStart:$,lineEnd:x,polygonStart:function(){e.polygonStart(),E.lineStart=C},polygonEnd:function(){e.polygonEnd(),E.lineStart=$}};function m(T,I){T=n(T,I),e.point(T[0],T[1])}function $(){u=NaN,E.point=S,e.lineStart()}function S(T,I){var O=wn([T,I]),L=n(T,I);i(u,f,o,p,v,_,u=L[0],f=L[1],o=T,p=O[0],v=O[1],_=O[2],Ae,e),e.point(u,f)}function x(){E.point=m,e.lineEnd()}function C(){$(),E.point=N,E.lineEnd=D}function N(T,I){S(r=T,I),s=u,c=f,g=p,y=v,d=_,E.point=S}function D(){i(u,f,o,p,v,_,s,c,r,g,y,d,Ae,e),E.lineEnd=x,x()}return E}}var Oi=Rt({point:function(n,t){this.stream.point(n*G,t*G)}});function Bi(n){return Rt({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function Gi(n,t,i,e,r){function s(c,g){return c*=e,g*=r,[t+n*c,i-n*g]}return s.invert=function(c,g){return[(c-t)/n*e,(i-g)/n*r]},s}function Ye(n,t,i,e,r,s){if(!s)return Gi(n,t,i,e,r);var c=q(s),g=j(s),y=c*n,d=g*n,o=c/n,u=g/n,f=(g*i-c*t)/n,p=(g*t+c*i)/n;function v(_,E){return _*=e,E*=r,[y*_-d*E+t,i-d*_-y*E]}return v.invert=function(_,E){return[e*(o*_-u*E+f),r*(p-u*_-o*E)]},v}function Zi(n){return Wi(function(){return n})()}function Wi(n){var t,i=150,e=480,r=250,s=0,c=0,g=0,y=0,d=0,o,u=0,f=1,p=1,v=null,_=me,E=null,m,$,S,x=yt,C=.5,N,D,T,I,O;function L(l){return T(l[0]*G,l[1]*G)}function H(l){return l=T.invert(l[0],l[1]),l&&[l[0]*on,l[1]*on]}L.stream=function(l){return I&&O===l?I:I=Oi(Bi(o)(_(N(x(O=l)))))},L.preclip=function(l){return arguments.length?(_=l,v=void 0,a()):_},L.postclip=function(l){return arguments.length?(x=l,E=m=$=S=null,a()):x},L.clipAngle=function(l){return arguments.length?(_=+l?wi(v=l*G):(v=null,me),a()):v*on},L.clipExtent=function(l){return arguments.length?(x=l==null?(E=m=$=S=null,yt):zi(E=+l[0][0],m=+l[0][1],$=+l[1][0],S=+l[1][1]),a()):E==null?null:[[E,m],[$,S]]},L.scale=function(l){return arguments.length?(i=+l,R()):i},L.translate=function(l){return arguments.length?(e=+l[0],r=+l[1],R()):[e,r]},L.center=function(l){return arguments.length?(s=l[0]%360*G,c=l[1]%360*G,R()):[s*on,c*on]},L.rotate=function(l){return arguments.length?(g=l[0]%360*G,y=l[1]%360*G,d=l.length>2?l[2]%360*G:0,R()):[g*on,y*on,d*on]},L.angle=function(l){return arguments.length?(u=l%360*G,R()):u*on},L.reflectX=function(l){return arguments.length?(f=l?-1:1,R()):f<0},L.reflectY=function(l){return arguments.length?(p=l?-1:1,R()):p<0},L.precision=function(l){return arguments.length?(N=De(D,C=l*l),a()):gn(C)},L.fitExtent=function(l,h){return Ie(L,l,h)},L.fitSize=function(l,h){return Di(L,l,h)},L.fitWidth=function(l,h){return Yi(L,l,h)},L.fitHeight=function(l,h){return Xi(L,l,h)};function R(){var l=Ye(i,0,0,f,p,u).apply(null,t(s,c)),h=Ye(i,e-l[0],r-l[1],f,p,u);return o=pi(g,y,d),D=dt(t,h),T=dt(o,D),N=De(D,C),a()}function a(){return I=O=null,L}return function(){return t=n.apply(this,arguments),L.invert=t.invert&&H,R()}}function Lt(n,t){return[n,t]}Lt.invert=Lt;function Vi(){return Zi(Lt).scale(152.63)}function Hi(n){return Math.sqrt(1- --n*n)}var it=n=>()=>n;function Ui(n,{sourceEvent:t,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function dn(n,t,i){this.k=n,this.x=t,this.y=i}dn.prototype={constructor:dn,scale:function(n){return n===1?this:new dn(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new dn(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xe=new dn(1,0,0);function Tt(n){n.stopImmediatePropagation()}function An(n){n.preventDefault(),n.stopImmediatePropagation()}function Ki(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Ji(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function qe(){return this.__zoom||Xe}function Qi(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function bi(){return navigator.maxTouchPoints||"ontouchstart"in this}function nr(n,t,i){var e=n.invertX(t[0][0])-i[0][0],r=n.invertX(t[1][0])-i[1][0],s=n.invertY(t[0][1])-i[0][1],c=n.invertY(t[1][1])-i[1][1];return n.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),c>s?(s+c)/2:Math.min(0,s)||Math.max(0,c))}function tr(){var n=Ki,t=Ji,i=nr,e=Qi,r=bi,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],g=250,y=We,d=At("start","zoom","end"),o,u,f,p=500,v=150,_=0,E=10;function m(a){a.property("__zoom",qe).on("wheel.zoom",T).on("mousedown.zoom",I).on("dblclick.zoom",O).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(a,l,h,M){var w=a.selection?a.selection():a;w.property("__zoom",qe),a!==w?C(a,l,h,M):w.interrupt().each(function(){N(this,arguments).event(M).start().zoom(null,typeof l=="function"?l.apply(this,arguments):l).end()})},m.scaleBy=function(a,l,h,M){m.scaleTo(a,function(){var w=this.__zoom.k,k=typeof l=="function"?l.apply(this,arguments):l;return w*k},h,M)},m.scaleTo=function(a,l,h,M){m.transform(a,function(){var w=t.apply(this,arguments),k=this.__zoom,P=h==null?x(w):typeof h=="function"?h.apply(this,arguments):h,z=k.invert(P),F=typeof l=="function"?l.apply(this,arguments):l;return i(S($(k,F),P,z),w,c)},h,M)},m.translateBy=function(a,l,h,M){m.transform(a,function(){return i(this.__zoom.translate(typeof l=="function"?l.apply(this,arguments):l,typeof h=="function"?h.apply(this,arguments):h),t.apply(this,arguments),c)},null,M)},m.translateTo=function(a,l,h,M,w){m.transform(a,function(){var k=t.apply(this,arguments),P=this.__zoom,z=M==null?x(k):typeof M=="function"?M.apply(this,arguments):M;return i(Xe.translate(z[0],z[1]).scale(P.k).translate(typeof l=="function"?-l.apply(this,arguments):-l,typeof h=="function"?-h.apply(this,arguments):-h),k,c)},M,w)};function $(a,l){return l=Math.max(s[0],Math.min(s[1],l)),l===a.k?a:new dn(l,a.x,a.y)}function S(a,l,h){var M=l[0]-h[0]*a.k,w=l[1]-h[1]*a.k;return M===a.x&&w===a.y?a:new dn(a.k,M,w)}function x(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function C(a,l,h,M){a.on("start.zoom",function(){N(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(M).end()}).tween("zoom",function(){var w=this,k=arguments,P=N(w,k).event(M),z=t.apply(w,k),F=h==null?x(z):typeof h=="function"?h.apply(w,k):h,Z=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),W=w.__zoom,U=typeof l=="function"?l.apply(w,k):l,fn=y(W.invert(F).concat(Z/W.k),U.invert(F).concat(Z/U.k));return function(an){if(an===1)an=U;else{var hn=fn(an),It=Z/hn[2];an=new dn(It,F[0]-hn[0]*It,F[1]-hn[1]*It)}P.zoom(null,an)}})}function N(a,l,h){return!h&&a.__zooming||new D(a,l)}function D(a,l){this.that=a,this.args=l,this.active=0,this.sourceEvent=null,this.extent=t.apply(a,l),this.taps=0}D.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,l){return this.mouse&&a!=="mouse"&&(this.mouse[1]=l.invert(this.mouse[0])),this.touch0&&a!=="touch"&&(this.touch0[1]=l.invert(this.touch0[0])),this.touch1&&a!=="touch"&&(this.touch1[1]=l.invert(this.touch1[0])),this.that.__zoom=l,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var l=V(this.that).datum();d.call(a,this.that,new Ui(a,{sourceEvent:this.sourceEvent,target:m,type:a,transform:this.that.__zoom,dispatch:d}),l)}};function T(a,...l){if(!n.apply(this,arguments))return;var h=N(this,l).event(a),M=this.__zoom,w=Math.max(s[0],Math.min(s[1],M.k*Math.pow(2,e.apply(this,arguments)))),k=pn(a);if(h.wheel)(h.mouse[0][0]!==k[0]||h.mouse[0][1]!==k[1])&&(h.mouse[1]=M.invert(h.mouse[0]=k)),clearTimeout(h.wheel);else{if(M.k===w)return;h.mouse=[k,M.invert(k)],Dn(this),h.start()}An(a),h.wheel=setTimeout(P,v),h.zoom("mouse",i(S($(M,w),h.mouse[0],h.mouse[1]),h.extent,c));function P(){h.wheel=null,h.end()}}function I(a,...l){if(f||!n.apply(this,arguments))return;var h=N(this,l,!0).event(a),M=V(a.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",Z,!0),w=pn(a,k),k=a.currentTarget,P=a.clientX,z=a.clientY;Bt(a.view),Tt(a),h.mouse=[w,this.__zoom.invert(w)],Dn(this),h.start();function F(W){if(An(W),!h.moved){var U=W.clientX-P,fn=W.clientY-z;h.moved=U*U+fn*fn>_}h.event(W).zoom("mouse",i(S(h.that.__zoom,h.mouse[0]=pn(W,k),h.mouse[1]),h.extent,c))}function Z(W){M.on("mousemove.zoom mouseup.zoom",null),Gt(W.view,h.moved),An(W),h.event(W).end()}}function O(a,...l){if(!!n.apply(this,arguments)){var h=this.__zoom,M=pn(a.changedTouches?a.changedTouches[0]:a,this),w=h.invert(M),k=h.k*(a.shiftKey?.5:2),P=i(S($(h,k),M,w),t.apply(this,l),c);An(a),g>0?V(this).transition().duration(g).call(C,P,M,a):V(this).call(m.transform,P,M,a)}}function L(a,...l){if(!!n.apply(this,arguments)){var h=a.touches,M=h.length,w=N(this,l,a.changedTouches.length===M).event(a),k,P,z,F;for(Tt(a),P=0;P<M;++P)z=h[P],F=pn(z,this),F=[F,this.__zoom.invert(F),z.identifier],w.touch0?!w.touch1&&w.touch0[2]!==F[2]&&(w.touch1=F,w.taps=0):(w.touch0=F,k=!0,w.taps=1+!!o);o&&(o=clearTimeout(o)),k&&(w.taps<2&&(u=F[0],o=setTimeout(function(){o=null},p)),Dn(this),w.start())}}function H(a,...l){if(!!this.__zooming){var h=N(this,l).event(a),M=a.changedTouches,w=M.length,k,P,z,F;for(An(a),k=0;k<w;++k)P=M[k],z=pn(P,this),h.touch0&&h.touch0[2]===P.identifier?h.touch0[0]=z:h.touch1&&h.touch1[2]===P.identifier&&(h.touch1[0]=z);if(P=h.that.__zoom,h.touch1){var Z=h.touch0[0],W=h.touch0[1],U=h.touch1[0],fn=h.touch1[1],an=(an=U[0]-Z[0])*an+(an=U[1]-Z[1])*an,hn=(hn=fn[0]-W[0])*hn+(hn=fn[1]-W[1])*hn;P=$(P,Math.sqrt(an/hn)),z=[(Z[0]+U[0])/2,(Z[1]+U[1])/2],F=[(W[0]+fn[0])/2,(W[1]+fn[1])/2]}else if(h.touch0)z=h.touch0[0],F=h.touch0[1];else return;h.zoom("touch",i(S(P,z,F),h.extent,c))}}function R(a,...l){if(!!this.__zooming){var h=N(this,l).event(a),M=a.changedTouches,w=M.length,k,P;for(Tt(a),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),k=0;k<w;++k)P=M[k],h.touch0&&h.touch0[2]===P.identifier?delete h.touch0:h.touch1&&h.touch1[2]===P.identifier&&delete h.touch1;if(h.touch1&&!h.touch0&&(h.touch0=h.touch1,delete h.touch1),h.touch0)h.touch0[1]=this.__zoom.invert(h.touch0[0]);else if(h.end(),h.taps===2&&(P=pn(P,this),Math.hypot(u[0]-P[0],u[1]-P[1])<E)){var z=V(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return m.wheelDelta=function(a){return arguments.length?(e=typeof a=="function"?a:it(+a),m):e},m.filter=function(a){return arguments.length?(n=typeof a=="function"?a:it(!!a),m):n},m.touchable=function(a){return arguments.length?(r=typeof a=="function"?a:it(!!a),m):r},m.extent=function(a){return arguments.length?(t=typeof a=="function"?a:it([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),m):t},m.scaleExtent=function(a){return arguments.length?(s[0]=+a[0],s[1]=+a[1],m):[s[0],s[1]]},m.translateExtent=function(a){return arguments.length?(c[0][0]=+a[0][0],c[1][0]=+a[1][0],c[0][1]=+a[0][1],c[1][1]=+a[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(a){return arguments.length?(i=a,m):i},m.duration=function(a){return arguments.length?(g=+a,m):g},m.interpolate=function(a){return arguments.length?(y=a,m):y},m.on=function(){var a=d.on.apply(d,arguments);return a===d?m:a},m.clickDistance=function(a){return arguments.length?(_=(a=+a)*a,m):Math.sqrt(_)},m.tapDistance=function(a){return arguments.length?(E=+a,m):E},m}var er=Object.defineProperty,nn=(n,t)=>er(n,"name",{value:t,configurable:!0});const ir=[].indexOf||function(n){for(let t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1},rr={legend:!1,zoom:!1,graticule:!1,hover:!1,link:!1};function je(n,t,i){const e=Object.assign({},rr,i),r=n.getBoundingClientRect(),s=Math.round(r.width),c=Math.round(r.height);let g=V(null);const y=V(".js-map-data"),d=y.attr("data-map-data"),o=JSON.parse(d),u=Vi().scale(s/2/Math.PI).translate([0,0]),f=tr().scaleExtent([1,20]).on("zoom",$),p=Ai().projection(u),v=Pi(),_=V(n).append("svg").attr("width",s).attr("height",c).on("click",function(R){if(R!=null&&R.defaultPrevented)return R.stopPropagation()},!0).append("g").attr("transform",`translate(${s/2},${c/2})`).call(f);_.append("rect").attr("class",`map-background${e.zoom?" map-background-zoom":""}`).attr("x",-s/2).attr("y",-c/2).attr("width",s).attr("height",c);const E=_.append("g");Zt("pjax:end",".js-pjax-container",m);function m(){const R=V(".js-map-data"),a=R.attr("data-map-data"),l=JSON.parse(a);return H(l),e.link&&S(E.selectAll(".map-country-outline")),N(R)}nn(m,"updateMapState");function $(R){e.zoom&&E.attr("transform",R.transform)}nn($,"zoomed");function S(R){const a=y.attr("data-search-path");return R.attr("xlink:href",function(l){return`${a} country:${encodeURIComponent(l.properties.iso_a2)}`.replace(/=\s+/,"=")})}nn(S,"updateCountryLink");function x(R){const a=y.attr("data-search-path");return R.attr("xlink:href",a)}nn(x,"clearCountryLink");function C(){if(g.node()===this)return I();g.classed("active",!1),g=V(this).classed("active",!0)}nn(C,"targetCountry");function N(R){const a=D(R.attr("data-country"));if(g.classed("active",!1),g=V(null),a.length){const l=E.select(`.${a}`);if(l.size())return g=V(l.node()),g.classed("active",!0),x(V(l.node().parentNode))}}nn(N,"selectActiveCountry");function D(R){return R.toLowerCase().replace(/\s+/,"-")}nn(D,"countrySelector");function T(R){const a=o[R.properties.iso_a2]||0,l=V(".js-map-country-info");return l.transition().duration(100).style("opacity",1),l.html(""),l.append("span").text(function(){return`${a===0?"No":a} ${a===1?"event":"events"} originating from ${R.properties.name}`})}nn(T,"displayCountryInfo");function I(){return g.classed("active",!1),g=V(null),E.transition().duration(750).call(f.translate([0,0]).scale(1).event)}nn(I,"reset");function O(R){const a=R.properties.iso_a2,h={US:[-98.5795,39.828175],CA:[-107.74899,59.24028],AU:[134.016341,-24.367113],SE:[15.985167,63.687217],GB:[-1.505067,53.647271],FR:[2.3488,48.85341],NO:[10.683333,59.933333],ID:[106.828333,-6.175],IN:[72.825833,18.975],MY:[101.7,3.133333]}[a]||hi(R);return u(h)}nn(O,"bestCenter");function L(R){const a=ni(R,R.objects.countries),l=bt(R,R.objects.countries,function(k,P){return k!==P}),h=bt(R,R.objects.land),M=y.attr("data-search-path");V(n).datum(a.features),E.append("path").datum(h).attr("class","map-land").attr("d",p);const w=E.selectAll(".map-country").data(a.features).enter().append("a").attr("class","map-country-outline").attr("aria-label",k=>k.properties.name);return e.link?w.attr("data-pjax","").attr("xlink:href",function(k){return`${M} country:${encodeURIComponent(k.properties.iso_a2)}`.replace(/=\s+/,"=")}):w.attr("role","button"),w.append("path").attr("class",function(k){const P=D(k.properties.iso_a2),z=D(k.properties.name);return`map-country ${P} ${z}`}).attr("d",p),e.hoverShowCountryInfo&&w.on("click",C).on("mouseover",T).on("mouseout",function(){return V(".js-map-country-info").transition().style("opacity",0)}),E.append("path").datum(l).attr("class","map-borders").attr("d",p),e.graticule&&E.append("g").attr("class","map-graticule").selectAll("path").data(v.lines).enter().append("path").attr("d",p),N(y)}nn(L,"drawBaseMap");function H(R){const a=Object.keys(R),l=a.length,h=V(n).datum().filter(function(P){const z=P.properties.iso_a2;return z!=="-99"&&ir.call(a,z)>=0});for(const P of h){const z=P.properties;z.count=o[z.iso_a2]||0}const M=Ft(h,function(P){return P.properties.count}),w=Ke().domain([0,M]).range([0,15]),k=E.selectAll(".map-point").data(h,function(P){return P.properties.iso_a2});if(k.enter().append("circle").attr("class",P=>`map-point ${P.properties.iso_a2}`).attr("r",0).transition(Dt().delay((P,z)=>z/l*15)).ease(Hi).attr("r",P=>w(P.properties.count)).each(function(P){const z=V(this),[F,Z]=O(P);return z.attr("cx",F).attr("cy",Z)}),k.exit().remove(),e.legend&&h.length>0){_.select(".map-legend").remove();const P=_.append("g").attr("class","map-legend").attr("transform",`translate(${s/2-25},${c/2-50})`).selectAll("g").data([M,Math.round(M/3)]).enter().append("g");P.append("circle").attr("class","map-legend-circle").attr("cy",function(z){return-w(z)}).attr("r",w),P.append("line").attr("x1",function(z){return-w(z)/2+5}).attr("x2",function(z){return-w(z)-20}).attr("y1",function(z){return-2*w(z)}).attr("y2",function(z){return-2*w(z)}).attr("class","map-legend-link"),P.append("text").attr("class","map-legend-text").attr("y",function(z){return-2*w(z)}).attr("x",function(z){return-w(z)-20}).attr("dy","0.5em").text(function(z){return z<10?z:Ot(".2s")(z)})}}nn(H,"drawDataLayer"),L(t),H(o)}nn(je,"render")}}});
//# sourceMappingURL=chunk-map-f10951a3.js.map
