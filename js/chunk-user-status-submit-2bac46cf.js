System.register(["./chunk-frameworks.js","./chunk-vendor.js"],function(Z){"use strict";var w,p,C,I,F,y,D,P,l,_,O,B;return{setters:[function(u){w=u.o,p=u.O,C=u.A,I=u.au,F=u.bf,y=u.at,D=u.r,P=u.e},function(u){l=u.a,_=u.h,O=u.r,B=u.o}],execute:function(){Z("init",J);var u=Object.defineProperty,n=(e,t)=>u(e,"name",{value:t,configurable:!0});function E(e){return e.querySelector(".js-user-status-details").hasAttribute("open")}n(E,"isEditMode");function h(e){const t=e.querySelector(".js-user-status-org-picker");t&&!t.src&&(t.src=t.getAttribute("data-url")||"")}n(h,"loadOrgPicker");function b(e,t){const s=e.querySelector(".js-user-status-emoji-picker");if(!s||s.src)return;let r=s.getAttribute("data-url")||"";if(!r)throw new Error("could not get url");if(t){const o=new URL(r,window.location.origin);o.searchParams.append("show_picker","1"),r=o.toString()}s.src=r}n(b,"loadEmojiPicker");function N(e){const t=e.querySelector(".js-emoji-picker");t&&(t.reset(),t.close())}n(N,"resetEmojiPicker");function q(e){const t=e.querySelector(".js-user-status-original-emoji"),s=e.querySelector(".js-user-status-custom-emoji"),r=e.querySelector(".js-user-status-no-emoji-icon");s.innerHTML=t.innerHTML,r.hidden=s.hasChildNodes()}n(q,"resetSelectedEmoji");function R(e){const t=e.querySelector(".js-user-status-message-field");q(e),N(e),t.value=t.defaultValue,I(e)}n(R,"closeUserStatusEdit");function $(e,t){q(e),b(e,t),h(e)}n($,"openUserStatusEdit");function g(e){const t=e.querySelector(".js-user-status-suggestions"),o=e.querySelector(".js-user-status-message-field").value.trim().length>0;t.classList.toggle("collapsed",o),t.setAttribute("aria-expanded",o.toString())}n(g,"hideSuggestedUserStatusesIfNecessary");function v(e,t){E(e)?R(e):$(e,t),f(e)}n(v,"toggleUserStatusEdit");function k(e,t){const s=e.querySelector(".js-user-status-custom-emoji");s.innerHTML=t.innerHTML;const r=e.querySelector(".js-user-status-no-emoji-icon");r.hidden=!0}n(k,"displayEmoji");function L(e,t){const s=e.querySelector(".js-user-status-emoji-field");s.value=t.value}n(L,"setEmojiField");function W(e){var t;const s=e.closest(".js-user-status-container"),r=s.querySelector(".js-emoji-picker");L(s,e),(t=r.querySelector(".selected-emoji"))==null||t.classList.remove("selected-emoji"),e.classList.add("selected-emoji"),k(s,e),f(s),r.close()}n(W,"selectEmoji");function x(e,t){if(_(t)==="Escape"){const s=e.closest(".js-user-status-container");if(!(s instanceof HTMLElement))return;e.value=e.defaultValue,v(s,!1)}}n(x,"handleUserStatusEscape");function f(e){const t=e.querySelector(".js-user-status-submit"),s=e.querySelector(".js-clear-user-status-button"),r=e.querySelector(".js-user-status-message-field"),o=e.querySelector(".js-user-status-emoji-field"),a=r.value.trim(),c=o.value.trim();let i=!1,d=!1;F(r)&&(i=!0),a.length<1&&c.length<1&&(i=!0,s.classList.contains("js-user-status-exists")||(d=!0)),t.disabled=i,s.disabled=d}n(f,"disableUserStatusSubmitIfNecessary");function z(e){e.hidden=!0;const t=e.querySelector(".js-user-status-emoji-field");t.value="";const s=e.querySelector(".js-user-status-no-emoji-icon");s.hidden=!1;const r=e.querySelector(".js-user-status-custom-emoji");r.innerHTML="";const o=e.querySelector(".js-user-status-message-field");o.value="",o.classList.contains("js-characters-remaining-field")&&y(o);const a=e.querySelector(".selected-emoji.js-user-status-emoji-button");a&&a.classList.remove("selected-emoji");const c=e.querySelector(".js-user-status-limited-availability-checkbox");c.checked=!1;const i=e.querySelector(".js-user-status-expiration-date-input");i&&i instanceof HTMLInputElement&&(i.value=""),f(e),g(e);const d=e.querySelector(".js-user-status-form");D(d)}n(z,"clearUserStatus");function V(e){const t=e.closest(".js-user-status-container"),s=t.querySelector(".js-user-status-org-id-field"),r=t.querySelector(".js-user-status-org-details"),o=t.querySelector(".js-user-status-selected-org"),a=e.querySelector(".js-user-status-org-display"),c=t.querySelector(".js-user-status-org-message"),i=e.value,d=i!=="",m=t.querySelector(".js-user-status-message-field"),S=t.querySelector(".js-user-status-org-button.selected");let H="";S&&S.classList.remove("selected"),e.classList.add("selected"),s.value=i,o.innerHTML="";const M=a.cloneNode(!0);if(M instanceof HTMLElement&&(M.hidden=!1),o.appendChild(M),r.removeAttribute("open"),d){const te=c.getAttribute("data-prefix")||"",se=c.getAttribute("data-suffix")||"",re=e.getAttribute("data-org")||"";c.textContent=`${te}${re}${se}`,c.hidden=!1;const A=new URL(m.getAttribute("data-org-url")||"",window.location.origin),Y=new URLSearchParams(A.search.slice(1));Y.append("global_id",i),A.search=Y.toString(),H=A.toString()}else c.textContent=c.getAttribute("data-none")||"",c.hidden=!0,H=m.getAttribute("data-no-org-url")||"";m.closest("text-expander").setAttribute("data-mention-url",H)}n(V,"selectOrganization");function G(e){const t=e.closest(".js-user-status-container"),s=e.querySelector(".js-predefined-user-status-emoji"),r=e.querySelector(".js-predefined-user-status-message"),o=t.querySelector(".js-user-status-message-field");o.value=(r.textContent||"").trim(),k(t,s),L(t,e),f(t),g(t),o.classList.contains("js-characters-remaining-field")&&y(o)}n(G,"selectedSuggestedUserStatus");function K(e,t){const s=e.querySelector(".js-user-status-expiration-interval-selected"),r=e.querySelector(".js-user-status-expire-drop-down"),o=e.querySelector(".js-user-status-expiration-date-input");s.textContent=t.title,o.value=t.value,r.removeAttribute("open")}n(K,"setExpirationInterval");function j(e){return e.closest(".js-user-status-container")}n(j,"getUserStatusContainer"),l("click",".js-user-status-expire-button",function(e){const t=e.currentTarget;if(!(t instanceof HTMLButtonElement))return;const s=j(t);K(s,t)}),l("click",".js-toggle-user-status-edit",function(e){const t=e.currentTarget,s=j(t),r=!!t.closest(".js-toggle-user-status-emoji-picker");v(s,r)});function J(e){b(e,!1),h(e)}n(J,"init"),l("click",".js-toggle-user-status-emoji-picker",function(e){const s=j(e.currentTarget).querySelector(".js-emoji-picker");!s||(e.stopPropagation(),s.hidden?s.open():s.close())},{capture:!0}),l("click",".js-user-status-emoji-button",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&W(t)}),w(".js-user-status-message-field",function(e){const t=j(e);g(t)}),p("keyup",".js-user-status-message-field",e=>{const t=e.target;t instanceof HTMLInputElement&&x(t,e)}),p("keyup",".js-emoji-picker-filter",e=>{const t=e.target;t instanceof HTMLInputElement&&x(t,e)}),l("click",".js-clear-user-status-button",function(e){const t=e.currentTarget;if(!(t instanceof HTMLButtonElement))return;const s=t.closest(".js-user-status-container");z(s)}),l("click",".js-predefined-user-status",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&G(t)}),C(".js-user-status-message-field",function(e){const t=e.target;if(!(t instanceof HTMLElement))return;const s=t.closest(".js-user-status-form");f(s),g(s)}),l("click",".js-user-status-org-button",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&V(t)}),l("change",".js-user-status-limited-availability-checkbox",function(e){const t=e.target;if(!(t instanceof HTMLInputElement))return;const s=t.closest(".js-user-status-form"),r=t.checked,o=t.getAttribute("data-default-message")||"",a=s.querySelector(".js-user-status-message-field");r&&a.value.length<1?a.value=o:!r&&a.value===o&&(a.value=""),f(s),g(s)});var ee=Object.defineProperty,U=(e,t)=>ee(e,"name",{value:t,configurable:!0});O(".js-user-status-form",async function(e,t){const s=e.querySelector(".js-user-status-form-group");s.classList.remove("errored");let r;try{r=await t.html()}catch{s.classList.add("errored");return}const o=e.closest(".js-user-status-container"),a=r.html.querySelector(".js-user-status-container");o.replaceWith(r.html);const c=document.querySelectorAll(".js-user-status-container");for(const i of c)if(a!==i){const d=i.closest(".js-user-status-context");if(d){const m=d.getAttribute("data-url");if(!m)throw new Error("could not get url");const S=await P(document,m);i.replaceWith(S)}}});function T(e,t){if(E(e))return;const s=e.querySelectorAll(".js-toggle-user-status-edit.Details-content--closed");for(const r of s)r.classList.toggle("color-fg-accent",t),r.classList.toggle("Link--primary",!t)}U(T,"toggleUserStatusEditHoverEffects");function Q(e){if(!(e.target instanceof Element))return;const t=e.target.closest(".js-user-status-container");T(t,!0)}U(Q,"showUserStatusEditHoverEffects");function X(e){if(!(e.target instanceof Element))return;const t=e.target.closest(".js-user-status-container");T(t,!1)}U(X,"hideUserStatusEditHoverEffects"),B(".js-toggle-user-status-edit",function(e){e.addEventListener("mouseenter",Q),e.addEventListener("mouseleave",X)})}}});
//# sourceMappingURL=chunk-user-status-submit-6169191f.js.map
